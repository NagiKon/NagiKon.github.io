<!DOCTYPE html>
<html lang="zh-TW">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/site_logo.webp">
  <title>Treeboのブログ</title>
  <meta name="author" content="Treebo" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="技術部落格" />
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Treeboのブログ">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Treeboのブログ">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="http://example.com/images/site_logo.webp">
<meta property="article:author" content="Treebo">
<meta property="article:tag" content="技術部落格">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/site_logo.webp">
<meta name="twitter:site" content="@null">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" type="text/css" media="all">
  
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.min.css" type="text/css" media="all">
  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['G-34GCMGPCS5']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXX-Y', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner.webp');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('/images/bg.webp');
        }
      }
    
  </style>
  
<meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首頁</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-file"></i>歸檔</a></li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">Treeboのブログ</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>Treeboのブログ</h2> <br />
                        <span>學習與反思；交流與批判</span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            
    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/09/03/hello-world/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/09/03/hello-world/">Hello World</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-09-03
                        </li>
                        
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/09/03/hello-world/#more" title="Hello World">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E4%BB%80%E9%BA%BC%E6%98%AF%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E5%8F%8B%E5%A5%BD/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E4%BB%80%E9%BA%BC%E6%98%AF%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E5%8F%8B%E5%A5%BD/">什麼是對使用者友好</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                            <li>
                                <i class="fa fa-folder"></i>
                                分類於
                                <a class="label-link" href="/categories/PHP/">PHP</a>
                            </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" rel="tag">当然我在扯淡</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h2 id="Type-theory"><a href="#Type-theory" class="headerlink" title="Type theory"></a>Type theory</h2><ol>
<li>這個系統有多個模組，包括機器模組和人類模組</li>
<li>機器模組之間的界面使用定義好的 API 接口。</li>
<li>人機互動的界面就是機器模組和人類模組之間的接口。</li>
<li>每個界面必須提供一定的抽象，用於防止使用者得到它不該知道的細節。這個使用者可能是機器模組，也可能是人類模組。</li>
<li>抽象使得系統具有可擴展性。因為只要界面不變，模組改動之後，它的使用者完全不用修改。</li>
</ol>
<h2 id="使用者也是系統的模組"><a href="#使用者也是系統的模組" class="headerlink" title="使用者也是系統的模組"></a>使用者也是系統的模組</h2><p>在機器的各個模組間，抽象表現為函數或者方法的類型（type），程式的模組（module）定義，操作系統的系統調用（system call），等等。但是它們的本質都是一樣的：他們告訴使用者「你能用我來幹什麼。」。很多程式開發者都會注意到這些機器界面的抽象，讓使用者盡量少的接觸到實現細節。可是他們卻往往忽視了使用者和機器之間的界面。</p>
<p>也許他們沒有忽視它，但是他們卻用非常不一樣的設計思想來考慮這個問題。「他們沒有真正把使用者當成這個系統的一部分，沒有像對待其它機器模塊一樣，提供具有良好抽象的界面給使用者。他們貌似覺得使用者應該可以多做一些事情，所以把紛繁複雜的程序內部結構暴露給使用者（包括他們自己）。」</p>
<p>所以，使用者對”我能用這個程式幹什麼”這個問題總是感到很糊塗。當程式被修改之後，還經常需要讓使用者的操作發生改變，所以這個系統對於使用者的可擴展性就差。通常程式開發者都考慮到機器各界面之間的擴展性，卻沒有考慮到機器與使用者之間界面的可擴展性。</p>
<h2 id="如何對使用者更加友好"><a href="#如何對使用者更加友好" class="headerlink" title="如何對使用者更加友好"></a>如何對使用者更加友好</h2><ol>
<li>統一</li>
</ol>
<blockquote>
<p>隨時注意，使用者是系統的一部分，而不是什麼古怪的神物基本上可以把使用者想像成一個程式模組。</p>
</blockquote>
<ol start="2">
<li>抽象</li>
</ol>
<blockquote>
<p>最大限度的掩蓋程式內部的實現，盡量不讓使用者知道他不必要知道的東西不願意暴露給其它程式模組的細節，也不要暴露給使用者。“機所不欲，勿施於人” 。</p>
</blockquote>
<ol start="3">
<li>充要</li>
</ol>
<blockquote>
<p>提供給使用者充分而必要（不多於）的機制來完成使用者想完成的任務。</p>
</blockquote>
<ol start="4">
<li>正交</li>
</ol>
<blockquote>
<p>機制之間應該盡量減少冗餘和重疊，保持正交（orthogonal）。</p>
</blockquote>
<ol start="5">
<li>组合</li>
</ol>
<blockquote>
<p>機制之間應該可以組合（compose），盡量使得幹同一件事情只有一種組合。</p>
</blockquote>
<ol start="6">
<li>理性</li>
</ol>
<blockquote>
<p>並不是所有使用者想要的功能都是應該有的，他們經常欺騙自己，要搞清楚哪些是他們真正需要的功能。</p>
</blockquote>
<ol start="7">
<li>信道</li>
</ol>
<blockquote>
<p>人的輸入輸出包括5種感官，雖然通常電腦只與人通過視覺和聽覺交互。</p>
</blockquote>
<ol start="8">
<li>直覺</li>
</ol>
<blockquote>
<p>人是靠直覺和模型（model）思考的，給使用者的資訊不管是符號還是圖形，應該容易在人腦中建立起直觀的模型，這樣使用者才能高效的操作它們。</p>
</blockquote>
<ol start="9">
<li>上下文</li>
</ol>
<blockquote>
<p>人腦的「快存」的容量是很小的。試試你能同時想起7個人的名字嗎？所以在任一特定時刻，應該只提供與當前被關注對象相關的操作，而不是提供所有情況下的所有操作供使用者選擇。上下文菜單和依據上下文的鍵盤操作提示，貌似不錯的主意。</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.yinwang.org/blog-cn/2012/05/18/user-friendliness">什么是“对用户友好”</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E4%BB%80%E9%BA%BC%E6%98%AF%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E5%8F%8B%E5%A5%BD/#more" title="什麼是對使用者友好">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%20%E7%B3%BB%E5%88%97%20%E7%AC%AC%208%20%E7%AF%87%20-%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%A8%BB%E8%A7%A3/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%20%E7%B3%BB%E5%88%97%20%E7%AC%AC%208%20%E7%AF%87%20-%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%A8%BB%E8%A7%A3/">可不可以不要寫糙 code 系列 第 8 篇 - 不必要的註解</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Coding-Tips/" rel="tag">Coding Tips</a>, <a class="tag-none-link" href="/tags/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99-code/" rel="tag">可不可以不要寫糙 code</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h2 id="重點"><a href="#重點" class="headerlink" title="重點"></a>重點</h2><ol>
<li>好的程式碼，可以自己解釋自己。</li>
<li>在程式碼中，註解的正確使用方式，是能夠在最關鍵時刻，提供提示的內容。</li>
<li>曝露太多複雜性或細節時，需要有層次感的去表達。用註解來呈現段落感，並不是一個使用註解的好時機，段落感最好的做法，用 <code>function name</code> 取代註解。</li>
</ol>
<blockquote>
<p>「註解會說謊，原始碼不會」</p>
</blockquote>
<h2 id="好的註解"><a href="#好的註解" class="headerlink" title="好的註解"></a>好的註解</h2><ol>
<li>《Clean Code》, Ch4 註解，整個章節都在介紹註解。對於不好的註解的介紹有 68~81 頁之多</li>
<li>《The Art of Readable Code》 ,Ch5 認識註解, Ch6 讓註解精確與簡潔。花了兩個章節介紹</li>
<li>《Code Complete 2/e》 ,Ch9 虛擬碼程式設計流程。介紹如何寫完程式碼就擁有良好註解。</li>
<li>《You Don’t Know JS: Up &amp; Going》, Chapter 1: Into Programming, Code Comments。給出了一個簡單的標準: 寫 why 不寫 what，偶爾寫寫 how。</li>
</ol>
<blockquote>
<p>如同 YDKJS 的標準一般: 「寫 why 不寫 what，偶爾寫寫 how。」</p>
</blockquote>
<h3 id="PPP-開發法"><a href="#PPP-開發法" class="headerlink" title="PPP 開發法"></a>PPP 開發法</h3><ol>
<li>先寫下你要寫程式的註解</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 打開圖檔</span></span><br><span class="line"><span class="comment">//     - 宣告好 canvas</span></span><br><span class="line"><span class="comment">//     - 取得 img tag 的影像來源</span></span><br><span class="line"><span class="comment">// 2. 影像處理演算法</span></span><br><span class="line"><span class="comment">//     - 設定閥值</span></span><br><span class="line"><span class="comment">//     - 處理每一個 pixel</span></span><br><span class="line"><span class="comment">//         - 比閥值大，就變白，不然變黑</span></span><br><span class="line"><span class="comment">// 3. 顯示影像處理結果的量化資料</span></span><br><span class="line"><span class="comment">//     - 計數黑白值各多少</span></span><br><span class="line"><span class="comment">//     - 顯示計算結果到畫面上</span></span><br><span class="line"><span class="comment">// 4. 顯示影像處理結果的圖形資料</span></span><br><span class="line"><span class="comment">//     - 影像結果顯示在 canvas 上</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在註解下寫下程式碼</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 打開圖檔</span></span><br><span class="line"><span class="comment">//     - 宣告好 canvas</span></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#draw&quot;</span>);</span><br><span class="line"><span class="comment">//     - 取得 img tag 的影像來源</span></span><br><span class="line"><span class="keyword">const</span> img = <span class="built_in">document</span>.querySelector(<span class="string">&quot;img&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> height = img.height;</span><br><span class="line"><span class="keyword">const</span> width = img.width;</span><br><span class="line">canvas.width = width;</span><br><span class="line">canvas.height = height;</span><br><span class="line">ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line"><span class="keyword">const</span> image = ctx.getImageData(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 影像處理演算法</span></span><br><span class="line"><span class="comment">//     - 設定閥值</span></span><br><span class="line"><span class="keyword">const</span> threshold_input = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#threshold&#x27;</span>);</span><br><span class="line">threshold = threshold_input.value;</span><br><span class="line"><span class="comment">//     - 處理每一個 pixel</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; image.data.length; i += <span class="number">4</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = image.data[i + <span class="number">0</span>] + image.data[i + <span class="number">1</span>] + image.data[i + <span class="number">2</span>];</span><br><span class="line">  <span class="keyword">let</span> color = sum / <span class="number">3</span>;</span><br><span class="line">  <span class="comment">//         - 比閥值大，就變白，不然變黑</span></span><br><span class="line">  <span class="keyword">if</span>(color &gt; threshold) &#123;</span><br><span class="line">    color = <span class="number">255</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    color = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  image.data[i + <span class="number">0</span>] = color; <span class="comment">// RED</span></span><br><span class="line">  image.data[i + <span class="number">1</span>] = color; <span class="comment">// GREEN</span></span><br><span class="line">  image.data[i + <span class="number">2</span>] = color; <span class="comment">// Blue</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3. 顯示影像處理結果的量化資料</span></span><br><span class="line"><span class="comment">//     - 計數黑白值各多少</span></span><br><span class="line"><span class="keyword">let</span> [countW, countB] = countWB(image);</span><br><span class="line"><span class="comment">//     - 顯示計算結果到畫面上</span></span><br><span class="line">showReport(countW, countB);</span><br><span class="line"><span class="built_in">console</span>.log(countW / (countW + countB) * <span class="number">100</span>, countB / (countW + countB) * <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 顯示影像處理結果的圖形資料</span></span><br><span class="line"><span class="comment">//     - 影像結果顯示在 canvas 上</span></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#draw&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">ctx.putImageData(image, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>將適合成為 function 的部份歸納成 function</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 打開圖檔</span></span><br><span class="line">  <span class="keyword">let</span> image = openImage(<span class="string">&quot;img&quot;</span>, <span class="string">&quot;#draw&quot;</span>);</span><br><span class="line">  <span class="comment">// 2. 影像處理演算法</span></span><br><span class="line">  image = imageProcess(image);</span><br><span class="line">  <span class="comment">// 3. 顯示影像處理結果的量化資料</span></span><br><span class="line">  report(image);</span><br><span class="line">  <span class="comment">// 4. 顯示影像處理結果的圖形資料</span></span><br><span class="line">  drawImage(image, <span class="string">&quot;#draw&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>看看有沒有什麼要刪掉的註解</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> image = openImage(<span class="string">&quot;img&quot;</span>, <span class="string">&quot;#draw&quot;</span>);</span><br><span class="line">  image = imageProcess(image);</span><br><span class="line">  report(image);</span><br><span class="line">  drawImage(image, <span class="string">&quot;#draw&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10204310">不必要的註解</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%20%E7%B3%BB%E5%88%97%20%E7%AC%AC%208%20%E7%AF%87%20-%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%A8%BB%E8%A7%A3/#more" title="可不可以不要寫糙 code 系列 第 8 篇 - 不必要的註解">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%20-%20Introducation/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%20-%20Introducation/">作業系統 - Introducation</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Operating-System/" rel="tag">Operating System</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>作業系統：是介於使用者與硬體之間，用來控制硬體的軟體。</p>
<h2 id="作業系統的組成"><a href="#作業系統的組成" class="headerlink" title="作業系統的組成"></a>作業系統的組成</h2><p>作業系統是一個持續運作在電腦上的軟體程式。</p>
<p><img src="https://i.imgur.com/am305FL.png"></p>
<p>其中 kernel 是 OS 的重要核心之一，它充當著 Process 和 hardware 之間的溝通橋樑。當電腦開機時，最先載入的就是 <code>kernel</code>。</p>
<p>除了 Kernel 以外還有另外兩種程式分別是：</p>
<ul>
<li>System Programe：與 OS 相關，但不一定與 Kernel 相關</li>
<li>Application Programe：與操作系統底層無關的所有程式</li>
</ul>
<h2 id="Middlware"><a href="#Middlware" class="headerlink" title="Middlware"></a>Middlware</h2><p>是一組提供應用程式開發者額外服務的軟體框架。</p>
<h2 id="Interrupts"><a href="#Interrupts" class="headerlink" title="Interrupts"></a>Interrupts</h2><p>當 CPU 被中斷時，會將正在執行的程式 <code>transfer</code> 到一個特定的位址，當中斷程式執行完成後，會將原本的程式還原並繼續執行。傳統的 OS 通常會把程式存在固定的位址中，而最近的 OS 則是直接存在 <code>system stack</code> 中。如果 <code>interrupt routine</code> 需要修改暫存器的值的話，則必須先把原本的程式還原，然後再中斷一次。</p>
<p><img src="https://i.imgur.com/LbbbzMG.png"></p>
<p>而負責執行 <code>interrupt</code> 這個動作的程式一般被稱為「<code>interrupt-specific handler</code>」。<br>一般為了能夠快速執行 <code>interrupt</code>，會直接將所有的 <code>interrupt routine</code> 存在一張 <code>table</code> 中。而這張 <code>table</code> 中的位址，皆對應著唯一的 <code>interrupt routine</code>。</p>
<h2 id="Storage-Structure"><a href="#Storage-Structure" class="headerlink" title="Storage Structure"></a>Storage Structure</h2><p>在電腦中最基本的單位被稱為 <code>bit</code>。<code>Byte</code> 則是以 8 bit 為一個單位所儲存，通常被用來當做電腦存儲的基本單位。一般的電腦都是一個 <code>byte</code> 在移動資料，而非一個 <code>bit</code>。至於 <code>network</code> 則是一個 <code>bit</code> 在移動，因此在一般換算上才會除 8。</p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%20-%20Introducation/#more" title="作業系統 - Introducation">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%E7%B3%BB%E5%88%97%20-%20%E5%A6%82%E4%BD%95%E5%AF%AB%E9%AB%98%E5%93%81%E8%B3%AA%20function/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%E7%B3%BB%E5%88%97%20-%20%E5%A6%82%E4%BD%95%E5%AF%AB%E9%AB%98%E5%93%81%E8%B3%AA%20function/">可不可以不要寫糙 code系列 - 如何寫高品質 function </a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Coding-Tips/" rel="tag">Coding Tips</a>, <a class="tag-none-link" href="/tags/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99-code/" rel="tag">可不可以不要寫糙 code</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h6 id="tags"><a href="#tags" class="headerlink" title="tags:"></a>tags:</h6><h2 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h2><p>命名的目的，在於「好猜」，看命名就大致可以猜到這 function 在做什麼；反之，命名命得不好，就不好猜。</p>
<p>好的命名規則：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 包含邊界的極值優先使用 min 與 max</span><br><span class="line">2. 閉區間優先使用 first 與 end</span><br><span class="line">3. 半開放區間優先使用 begin 與 end</span><br></pre></td></tr></table></figure>

<h2 id="參數設計"><a href="#參數設計" class="headerlink" title="參數設計"></a>參數設計</h2><ul>
<li>全部參數都要用到，不用的參數，就不列出來。</li>
<li>表示函數執行的狀態或錯誤的參數，要放在相同的位置。（通常是最後）</li>
<li>可以的話數量掌握在 7±2 的範圍</li>
</ul>
<h2 id="Pure-function"><a href="#Pure-function" class="headerlink" title="Pure function"></a>Pure function</h2><blockquote>
<ol>
<li>Its return value is the same for the same arguments (no variation with local static variables, non-local variables, mutable reference arguments or input streams from I/O devices).</li>
<li>Its evaluation has no side effects (no mutation of local static variables, non-local variables, mutable reference arguments or I/O streams</li>
</ol>
</blockquote>
<ol>
<li>function 的輸出永遠只與 function 的輸入相關 (取隨機數就不算 pure )</li>
<li>沒有 side effects (沒有使用全域變數，或儲存永久變數)</li>
</ol>
<p>盡可能的讓 getter/setter 寫成 pure function ，將有助於你 debug。<br>這樣的設計，是 flux 在對狀態做更新與取用時，特別要注意的。(ex: vuex 的 mutation, getter)</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10206199">如何寫高品質 function (命名+參數篇)</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10206550">如何寫高品質 function (輸出+輸入篇)</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10206839">如何寫高品質 function (內聚性篇)</a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%E7%B3%BB%E5%88%97%20-%20%E5%A6%82%E4%BD%95%E5%AF%AB%E9%AB%98%E5%93%81%E8%B3%AA%20function/#more" title="可不可以不要寫糙 code系列 - 如何寫高品質 function ">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E5%BF%85%E5%8B%9D%20IT%20%E5%8D%81%E5%85%AB%E6%8B%9B/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E5%BF%85%E5%8B%9D%20IT%20%E5%8D%81%E5%85%AB%E6%8B%9B/">必勝 IT 十八招</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/%E5%BF%85%E5%8B%9D-IT-%E5%8D%81%E5%85%AB%E6%8B%9B/" rel="tag">必勝 IT 十八招</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h2 id="如何讓他人主動協助"><a href="#如何讓他人主動協助" class="headerlink" title="如何讓他人主動協助"></a>如何讓他人主動協助</h2><blockquote>
<p>在剛進一家公司的新人，要找到能夠借的力道，就是所屬單位的同事和主管。<br>當然一定要認清一件事情：沒有人義務可以幫你，<br>所以得先自己想辦法<strong>展現出企圖心和上進認真地解決問題</strong>，<br>那麼其實當需要幫助的話，同事或是主管都會願意協助。</p>
</blockquote>
<h2 id="觀察與保留實力"><a href="#觀察與保留實力" class="headerlink" title="觀察與保留實力"></a>觀察與保留實力</h2><blockquote>
<p>透過前言基本要訣：「目標、找師父、找大/小公司、勤練、時間管理」等等這些招數之後<br>就可以用客觀的方式來觀察事物，<strong>剛開始不要使出全力</strong>，透過觀察的方式，<br>去慢慢熟悉每個人的行為和習性與公司環境，<br>保留實力，等遇到問題之後，在看狀況應對和解決問題。</p>
</blockquote>
<h2 id="保持無知的自己"><a href="#保持無知的自己" class="headerlink" title="保持無知的自己"></a>保持無知的自己</h2><blockquote>
<p>唯有虛心接受自己不好的一面，才有突破的空間，保持無知的自己，你才能看到一些不可思議的事情或是有趣的新知。首先要先認清…自己本身還是有學習的地方，不懂的地方很多，努力的去追求更好的解答，讓自己更好，因為培養這樣就會無形慢慢建立誠信，因為擁有誠信，就會吸引一些能力很好的人一起與你共舞。</p>
<p>你服務的對象或是與你互動的同事，他們最希望看到的是<strong>專業、誠信的互動</strong>，因為當你做到專業與誠信，那自然會吸引一批他們願意相信你的人，所以自然不會失去這群人。</p>
<p>當你透過無知的部分，去學習，相對的別人會跟你請益相關問題的時候，自然你才有辦法引導他人，甚至做到驅動別人改變行為，做一些變革的模式，<strong>在資訊業裡頭，最難的就是驅動別人的改變</strong>，有時候必要的時候適當的表現無知，自己才能學習更多。</p>
</blockquote>
<h2 id="喜歡和合作與信任比專業更重要"><a href="#喜歡和合作與信任比專業更重要" class="headerlink" title="喜歡和合作與信任比專業更重要"></a>喜歡和合作與信任比專業更重要</h2><ol>
<li>你若不是選擇自己喜歡的工作或是感興趣的部分，你會覺得每天過得很痛苦</li>
<li>如果同事之間沒辦法合作，甚至爭鋒相對，你會覺得很阿雜，你會很煩…</li>
<li>信任指的是品牌或商品和商譽的信任和別人對自己的信任。</li>
</ol>
<blockquote>
<p>你要能夠做到表現出「他是值得付出的人，值得自己傻傻願意付出投入的人」。<br>當你願意付出與協助他人或是換位思考的時候，考慮主管或是同事的時候，這時候就會慢慢培養出自己擁有可被信任的人了，那自然就可以借用主管的力，反之主管也會借用你的力，變成合作模式，同時也彼此信任，共同來解決問題，讓大家能夠加薪也能夠工作愉快，這就是尋求雙贏的狀況。</p>
</blockquote>
<h2 id="逆向思考"><a href="#逆向思考" class="headerlink" title="逆向思考"></a>逆向思考</h2><blockquote>
<p>如果要明白人生如何得到幸福，就要先研究人生如何才能變得痛苦；要研究企業如何做強做大，<br>就要先研究企業是如何衰敗的。因為查理．蒙格知道，有時正向思考未必能將我們帶到想去的地<br>方，而逆向思考卻可以。<br>其實上述的方式，就是<strong>想知道自己未來會陣亡在什麼地方，這樣未來就不去那啦…</strong></p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/users/20063465/ironman/3590">必勝 IT 十八招</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E5%BF%85%E5%8B%9D%20IT%20%E5%8D%81%E5%85%AB%E6%8B%9B/#more" title="必勝 IT 十八招">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%8F%90%E5%8D%87%E5%89%8D%E7%AB%AF%20performance%20%E6%8A%80%E5%B7%A7/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%8F%90%E5%8D%87%E5%89%8D%E7%AB%AF%20performance%20%E6%8A%80%E5%B7%A7/">提升前端 performance 技巧</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/front-end/" rel="tag">front-end</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>使用者載入網頁後，瀏覽器經過轉譯、繪製才會顯示內容，大致可分為以下流程：</p>
<ul>
<li>Parse</li>
<li>Layout</li>
<li>Paint</li>
<li>Composite</li>
</ul>
<h2 id="Parse"><a href="#Parse" class="headerlink" title="Parse"></a>Parse</h2><p>載入 HTML 後，瀏覽器會開始進行解析，先將原始的 Response 內容轉換為字串，再利用 Tag 建立 Tokens、Nodes，最終建立 Document Object Model（DOM）：</p>
<p><img src="https://i.imgur.com/L2clXGZ.png"></p>
<p>而解析 HTML 的過程中若遇到 Inline CSS 或是 <link> 載入 CSS 檔，就會經過類似的流程建立出 CSS Object Model（CSSOM）：</p>
<p><img src="https://i.imgur.com/XdFHZWQ.png"></p>
<p>接著會利用 CSSOM 來算出 DOM 中每一個 Node 的 ComputedStyle，每個 ComputedStyle 都是包含所有 Style property、value 的超大物件，這個過程就是 <strong>Recalculate style</strong>。</p>
<h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><p>Layout 階段會把 DOM 轉換為 Layout tree，結構和 DOM 非常像，但不可見的 <code>&lt;script&gt;</code>、<code>&lt;link&gt;</code> 或是加上了 <code>display: none</code> 的 Node 會被排除，而不在 DOM 中的偽元素 ::before、::after 會被加入，建立 Layout tree 的結構（此結構常被稱為 <strong>Render tree</strong>）。</p>
<p><img src="https://i.imgur.com/gRmfSx4.png"></p>
<p>接著會遍歷 Layout tree 來計算所有 LayoutObject 的位置和大小，根據 LayoutObject 的不同如 LayoutBlock、LayoutInline 等等會有不同的計算方式，其他如字體、Overflow、Scrollbar、float、table、flex 排版、螢幕大小等等位置計算都在此階段完成。</p>
<p>此外在開始 Paint 之前若 LayoutObject 有特定的 Style property 如 transform、will-change 還會另外建立 PaintLayer，而產生 Layer 的過程就是 <strong>Update layer tree</strong>。</p>
<h2 id="Paint"><a href="#Paint" class="headerlink" title="Paint"></a>Paint</h2><p>Paint 可分為 Paint 和 Raster 兩個階段。</p>
<h3 id="Paint-1"><a href="#Paint-1" class="headerlink" title="Paint"></a>Paint</h3><p>第一階段並不會真的進行繪製動作，而是先把 Layout tree 轉換為一連串的繪製步驟，其概念和Canvas 非常像，例如「在 (x, y) 座標畫一個長寬為 (w, h) 的紅色長方形」，而一個繪製步驟稱為一個 <strong>DisplayItem</strong>。</p>
<p>雖然所有 LayoutObject 的位置、大小、樣式都確定了，但因為 Stacking order 的關係（position、z-index 等等影響元素覆蓋關係的 Style），無法遍歷一次 Layout tree 就建立所有 DisplayItem，因此這個階段會依據 Stacking order 多次遍歷 Layout tree 來產生 DisplayItem 陣列（DisplayItemList）。</p>
<p>就結果而言可以想像為將每個 LayoutObejct 轉換為 DisplayItem 後再以 Stacking order 排序，順序規則可以參考 Stacking context。</p>
<h3 id="Raster"><a href="#Raster" class="headerlink" title="Raster"></a>Raster</h3><p>第二階段就是依據 Update layer tree 建立的 PaintLayer 和所有繪製步驟（DisplayItemList）繪製出多個 Layer，每個 Layer 都是一張點陣圖。</p>
<h2 id="Composite"><a href="#Composite" class="headerlink" title="Composite"></a>Composite</h2><p>整個 Paint 階段繪製出多個 Layer 後，經由合成器（Compositor）把所有的 Layer 依照順序合併為一張圖，再交由瀏覽器顯示出來。</p>
<blockquote>
<p>瀏覽器將多個 Layer 合併為最終結果</p>
</blockquote>
<h2 id="回顧"><a href="#回顧" class="headerlink" title="回顧"></a>回顧</h2><p>順過一次流程後會發現中間還穿插了幾個步驟，因此更完整的 Rendering 流程應該如下：</p>
<ol>
<li>Recalculate Style</li>
<li>Layout</li>
<li>Update Layer Tree</li>
<li>Paint</li>
<li>Composite Layers</li>
</ol>
<h2 id="補充"><a href="#補充" class="headerlink" title="補充"></a>補充</h2><h3 id="Layers"><a href="#Layers" class="headerlink" title="Layers"></a>Layers</h3><p>瀏覽器為了提升繪製頁面的效能，會盡可能的利用上次繪製的結果，而 Layer 就是用來降低觸發 Layout、Paint 階段的次數，舉一些實際的例子，將部分內容移到額外的 Layer 後，就能對整個 Layer 加入動畫且不需要重繪該 Layer 的內容。</p>
<p><img src="https://i.imgur.com/eizNVTP.png"></p>
<h2 id="概覽"><a href="#概覽" class="headerlink" title="概覽"></a>概覽</h2><p>大部分的瀏覽器會以每秒 60 次的頻率刷新頁面，反過來說只要瀏覽器來不及在 16 毫秒（1000/60）內產出下一個畫面就會讓使用者感覺卡卡的，影響使用體驗。</p>
<p>Rendering 的各個階段：</p>
<p><img src="https://i.imgur.com/ALPY8YM.png"></p>
<ul>
<li>JavaScript – 用 JavaScript 修改 DOM 和 CSS 產生動畫</li>
<li>Style calculations – 計算每個元素的 Computed style</li>
<li>Layout – 計算元素的位置、大小</li>
<li>Paint – 將元素的文字、顏色、圖片等等繪製在多個 Layer 上</li>
<li>Compositing – 以正確的順序將 Layers 合併</li>
</ul>
<p>另外，盡量不要重複讀寫 layout</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> boxes = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.box&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> box <span class="keyword">of</span> boxes) &#123;</span><br><span class="line">  <span class="keyword">const</span> width = box.offsetWidth; <span class="comment">// 強制 Layout</span></span><br><span class="line">  box.style.width = <span class="string">`<span class="subst">$&#123;width + <span class="number">10</span>&#125;</span>px`</span>; <span class="comment">// 修改 Style</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不斷讀寫穿插的行為會引起效能爆炸，稱為 Layout Thrashing，只進行一次讀取或是把狀態儲存起來可以避免：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">boxWidth += <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> boxes = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.box&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> box <span class="keyword">of</span> boxes) &#123;</span><br><span class="line">  box.style.width = <span class="string">`<span class="subst">$&#123;boxWidth&#125;</span>px`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GIF"><a href="#GIF" class="headerlink" title="GIF"></a>GIF</h2><p>說到動圖首先想到的就是 GIF，不過 GIF 實在是非常大，不建議直接在網頁中使用，可用 FFmpeg 等工具把 GIF 轉成 MP4 或是 WebM（非常小，不需支援 IE 的首選）。</p>
<p><code>&lt;video&gt;</code></p>
<p>HTML 的 video 元素加上一些屬性後就能做到：自動開始、循環、無聲、避免全螢幕，和 GIF 沒兩樣，只差在不能直接使用 img 元素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;video autoplay loop muted playsinline&gt;</span><br><span class="line">  &lt;source src=&quot;my-animation.webm&quot; type=&quot;video/webm&quot;&gt;</span><br><span class="line">  &lt;source src=&quot;my-animation.mp4&quot; type=&quot;video/mp4&quot;&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<h2 id="響應式圖片（Responsive-iamges）"><a href="#響應式圖片（Responsive-iamges）" class="headerlink" title="響應式圖片（Responsive iamges）"></a>響應式圖片（Responsive iamges）</h2><p>在 img 加上一些屬性讓瀏覽器依據使用者螢幕大小自動判斷最適合的圖片，保持使用者體驗的同時不浪費流量和效能，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;img</span><br><span class="line">  src=&quot;flower-large.jpg&quot;</span><br><span class="line">  srcset=&quot;flower-small.jpg 480w, flower-large.jpg 1080w&quot;</span><br><span class="line">  sizes=&quot;(max-width: 600px) 480px, 50vw&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10248720">How Rendering Works</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10249554">Rendering Optimization </a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10252501">Optimize Images </a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%8F%90%E5%8D%87%E5%89%8D%E7%AB%AF%20performance%20%E6%8A%80%E5%B7%A7/#more" title="提升前端 performance 技巧">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%9E%B6%E6%A7%8B%E5%B8%AB/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%9E%B6%E6%A7%8B%E5%B8%AB/">架構</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/System-Design/" rel="tag">System Design</a>, <a class="tag-none-link" href="/tags/%E8%AC%9B%E5%BA%A7%E5%8F%83%E8%88%87%E5%BF%83%E5%BE%97/" rel="tag">講座參與心得</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>軟體架構師的定位是什麼？每個人對架構設計的定義是不同的。架構師要傾聽實作架構的人的意見，因為每個人都有盲點。</p>
<blockquote>
<p>不存在完美的架構</p>
</blockquote>
<p>通常架構師是團隊內最了解技術的人員之一，但就算再有能力，在架構師這個身份時，你一定會碰到很多你不知道的知識，這時候你要在廣度與深度之間抓好比例。</p>
<p>架構師常見問題：你沒有時間去對新技術做大量實作，更常見的是用你過往習慣的技術去處理，但架構師的挑戰不只是技術，甚至還有商業、法律等等。你很難去繼續鑽研深度。成為架構師意味著，你寫程式碼的時間會減少非常多！而且會很常遇到你在工程師時期最討厭的事物，如：參與政治議題、理解商業、理解組織、與他人談判與籌碼交易等等。</p>
<blockquote>
<p>架構師與其說是升級，不如說是轉型</p>
</blockquote>
<h2 id="架構師應具備的能力"><a href="#架構師應具備的能力" class="headerlink" title="架構師應具備的能力"></a>架構師應具備的能力</h2><ol>
<li>在公司中，你是具有公信力，是大家所信任的人。</li>
<li>在對談需求時，能勇敢說 yes/no。</li>
<li>持續學習與理解新技術，但不要在架構上亂玩新技術。</li>
</ol>
<h2 id="架構師的第一法則"><a href="#架構師的第一法則" class="headerlink" title="架構師的第一法則"></a>架構師的第一法則</h2><ul>
<li>一切都是取捨<ul>
<li>有時不只是深度足夠，更需要取決於技術廣度。</li>
<li>對領域知識也要足夠，架構設計也不是單靠一個人，還需要接觸利害關係人</li>
</ul>
</li>
<li>知道解決方案的差異</li>
<li>分析解決方案的好處與壞處</li>
<li>依據業務需求做出取捨</li>
</ul>
<p>當你讓架構師做所有決定（如核心、底層），那他有可能就會成為瓶頸。畢竟哪一天他離開了，團隊就沒有人看得懂這套「祖產」aka 技術債</p>
<p>應該是，當架構師決定好架構跟框架，其他讓工程師團隊去負責開發，而架構師頂多在業務相關的程式著手。這就是架構師兼顧技術深度與廣度的方法。</p>
<h2 id="軟體如何解決複雜問題"><a href="#軟體如何解決複雜問題" class="headerlink" title="軟體如何解決複雜問題"></a>軟體如何解決複雜問題</h2><p>你業務的流程很多，你所屬的業務的概念很多。一環扣著一環，沒有人有辦法單一個人就把解決方案說清楚。每個人看事情的角度不一樣，面對的問題也不一樣，解決問題的方式也不一樣。</p>
<p><img src="https://i.imgur.com/VjTFtVA.png"></p>
<p>我們往往從技術的角度來看事情，而忽略了商業這一塊。但當我們嘗試把商業套用到我們的技術架構時，往往會出問題。但我們很難捨棄商業這一塊，因為「這是我們吃飯的工具」。</p>
<p><img src="https://i.imgur.com/6souNx6.png"></p>
<h2 id="提出問題“難於”解決問題"><a href="#提出問題“難於”解決問題" class="headerlink" title="提出問題“難於”解決問題"></a>提出問題“難於”解決問題</h2><p>作為技術人員，我們已經習慣於作為問題的解決者給出設計方案，而很少以問題提出者的身份去思考設計方案。團隊中常見的典型矛盾，就是產品團隊和研發團隊之間的矛盾。</p>
<p>作為研發團隊，我們常吐槽產品團隊的需求不合理，不懂技術等。其實我們可以試著把自己的工作再往前移一下，不僅僅是去設計架構，實現產品的需求，同時也試著去實現客戶的需求，甚至發現潛在的需求。</p>
<p>這時我們就變成了在設計上提出問題的人，你會發現提出問題的同時，在很多時候也需要同樣深入的思考。設計一個好的問題，甚至比解決問題更難。</p>
<p>其實即便是軟體開發領域的大神 Frederick P. Brooks Jr.（《人月神话》的作者），也會有同樣的感嘆。</p>
<blockquote>
<p>“The hardest part of design is deciding what to design.”<br>– 《The design of design》, by Frederick P. Brooks Jr.</p>
</blockquote>
<h2 id="決定“不要什麼”比“要什麼”更難"><a href="#決定“不要什麼”比“要什麼”更難" class="headerlink" title="決定“不要什麼”比“要什麼”更難"></a>決定“不要什麼”比“要什麼”更難</h2><p>也許是由於人性的貪婪，對於軟體系統我們同樣想要更多：「更多功能」、「更好的性能」、「更好的伸縮性」、「擴展性」等等，作為軟體架構師要明白「軟體架構設計就是一種取捨或平衡」。當大家都在往裡面加東西的時候，架構師更應該來做這個說 <strong>“不”</strong> 的人。</p>
<p>軟體設計和定義過程中存在很多取捨，例如：</p>
<ul>
<li>完善功能和盡早發布的取捨</li>
<li>伸縮性和性能的取捨</li>
</ul>
<p>著名的 CAP 原則，就是一個很好的取捨指導策略。為了更好的取捨，保持架構風格的一致性，在一開始架構師就應該根據系統的實際需求來定義一些取捨的原則，如：</p>
<ul>
<li>數據一致性擁有最高優先級。</li>
<li>提前發布核心功能優於完整發布等。</li>
</ul>
<h2 id="非功能性需求决定架構"><a href="#非功能性需求决定架構" class="headerlink" title="非功能性需求决定架構"></a>非功能性需求决定架構</h2><p>因為軟體是為了滿足客戶的功能性需求的，所以很多設計人員可能會認為架構是由要實現的功能性需求決定的。但實際上真正決定軟體架構的其實是「非功能性需求」。</p>
<p>架構師要更加關注非功能性需求，常見的非功能性包括：「性能」，「伸縮性」，「擴展性」和「可維護性」等，甚至還包括團隊技術水平和發布時間要求能實現功能的設計總是有很多，考慮了非功能性需求後才能篩選出最合適的設計。</p>
<h2 id="“簡單”並不“容易”"><a href="#“簡單”並不“容易”" class="headerlink" title="“簡單”並不“容易”"></a>“簡單”並不“容易”</h2><p>很多架構師都會常常提到保持 simple，但是有時候我們會混淆 simple 和 easy。simple 和 easy 在英語裡也是兩個詞“simple”和“easy”。</p>
<blockquote>
<p>“Simple can be harder than complex:<br>You have to work hard to get your thinking clean to make it simple. But it’s worth it in the end because once you get there, you can move mountains.<br>To be truly simple, you have to go really deep.”<br>–SteveJobs</p>
</blockquote>
<p>真正的一些簡單的方法其實來自於對問題和技術更深入的理解。這些方案往往不是容易獲得的，表面上的方法。簡單可以說蘊含著一種深入的技巧在其中。</p>
<p>軟體系統的生命週期，有一大半時間都在維護，如何把架構設計的簡單易於維護，並不是一件容易的事情。</p>
<p><img src="https://i.imgur.com/79zzbei.png"></p>
<h2 id="溝通的成本"><a href="#溝通的成本" class="headerlink" title="溝通的成本"></a>溝通的成本</h2><blockquote>
<p>“I believe that the hardest part of software projects, the most common source of project failure, is communication with the customers and users of that software.”<br>–Martin Fowler</p>
</blockquote>
<p>正如軟體開發大師 Martin Fowler 提到的“溝通”往往是導致軟體開發失敗的主要原因。</p>
<h2 id="永遠不要停止寫程式"><a href="#永遠不要停止寫程式" class="headerlink" title="永遠不要停止寫程式"></a>永遠不要停止寫程式</h2><p>架構師也是程式設計師，程式碼是軟體的最終實現形態，停止 coding 會逐漸讓你忘記作為程式設計師的感受，更重要的是忘記其中的“痛”，從而容易產生一些不切實際的設計。</p>
<h2 id="風險優先"><a href="#風險優先" class="headerlink" title="風險優先"></a>風險優先</h2><p>架構設計很重要的一點是「識別可能存在的風險」，尤其是非功能性需求實現的風險。</p>
<p>因為這些風險往往沒有功能性需求這麼容易在初期被發現，但修正的代價通常要比修正功能性需求大非常多，甚至可能導致整個 project 的失敗，前面我們也提到了非功能性需求決定了架構，如：</p>
<ul>
<li>數據一致性要求</li>
<li>響應延遲要求</li>
</ul>
<p>我們應該通過原型或在早期的迭代中確認風險能夠通過合理的架構得以解決。絕對不要把風險放到最後，就算是一個 project 要失敗也要讓它<strong>快速失敗</strong>，這也是一種敏捷。</p>
<h2 id="從“問題”開始，而不是“技術”"><a href="#從“問題”開始，而不是“技術”" class="headerlink" title="從“問題”開始，而不是“技術”"></a>從“問題”開始，而不是“技術”</h2><p>技術人員對於新技術的都有著一種與身俱來的激情，總是樂於去學習新技術，同時也更有激情去使用新技術。但是這也同樣容易導致一個通病，就是「當我們有一個錘子的時候看什麼都是釘子」，使用一些不適合的技術去解決手邊的問題，常常會導致簡單的問題複雜化。</p>
<p>我曾經的一個團隊維護過這樣一個簡單的服務，起初就是一個用的 MySQL 作數據存儲的簡單服務，由團隊的一個成員來開發和維護。後來，這位成員對當時新出的 DynamoDB 產生了興趣，並學習了相關知識。然後就發生下面這樣的事：</p>
<ul>
<li>用DynamoDB替換了MySQL的。</li>
<li>很快發現DynamoDB並不能很好的支持事務特性，在當時只有一個性能極差的客戶端類庫來支持事物，由於採用客戶端方式，引入了大量的額外交互，導致性能差別達7倍之多。這時候，這個同學就採用了當時在NoSQL的領域廣泛流行的最終一致技術，通過一個發布 - 訂閱消息隊列來實現最終一致（即當某對象的值發生改變後會產生一個事件，然後關注這一改變的邏輯，就會訂閱這個通知，並改變於其相關數據，從而實現不同數據的最終一致）。</li>
<li>接著由於DynamoDB無法提供SQL那樣方便的查詢機制，為了實現數據分析就又引入了EMR / MapReduceJob。</li>
</ul>
<p>到此，大家可以看到實現一樣的功能，但是複雜性大大增加，維護工作也由一個人變成了一個團隊。</p>
<p><img src="https://i.imgur.com/QXYO7rM.png"></p>
<h2 id="過度忙碌使你落後"><a href="#過度忙碌使你落後" class="headerlink" title="過度忙碌使你落後"></a>過度忙碌使你落後</h2><p>對於IT人而言忙碌已成為了習慣，加班常掛在嘴邊。“996”工作制似乎也變成了公司高效的標誌。而事實上過度的忙碌使你落後。經常遇見一些朋友，在一個公司沒日沒夜的乾了幾年，沒有留一點學習時間給自己。幾年之後倒是對公司越來越“忠誠”了，但忙碌的工作同時也導致了沒有時間更新知識，使得自己已經落後了，連跳槽的能力和勇氣都失去了。</p>
<p>過度忙碌會導致沒有時間學習和更新自己的知識，尤其在這個高速發展的時代我在工作經歷中發現過度繁忙通常會帶來以下問題：</p>
<ul>
<li>缺乏學習導致工作能力沒有提升，而面對的問題卻變得日益複雜。</li>
<li>技術和業務上沒有更大的領先優勢，只能被動緊緊追趕。試想一下，要是你都領先同行業五年了，還會在乎通過加班來早一個月發布嗎？</li>
</ul>
<p>反過來上面這些問題會導致你更加繁忙，進而更沒有時間提高自己的技術技能，很快就形成了一個惡性循環。</p>
<p>練過健身的朋友都知道，光靠鍛煉是不行的，營養補充和鍛煉同樣重要。個人技術成長其實也一樣，實踐和學習是一樣重要的，當你在一個領域工作了一段時間以後，「工作對你而言就主要是實踐了，隨著你對該領域的熟悉，能學習的到技術會越來越少。」，所以每個技術人員都要保證充足的學習時間，否則很容易成為井底之蛙，從而陷入前面提到的惡性循環。</p>
<p>最後，以偉大詩人屈原的詩句和大家共勉：</p>
<blockquote>
<p>“路漫漫其修遠兮，吾將上下而求索”</p>
</blockquote>
<p>希望我們大家都可以不忘初心，保持匠心！</p>
<h2 id="實際案例"><a href="#實際案例" class="headerlink" title="實際案例"></a>實際案例</h2><p><img src="https://i.imgur.com/OnJMQ7B.png"></p>
<p><img src="https://i.imgur.com/4lpP5Ya.png"></p>
<h3 id="Impact-Mapping"><a href="#Impact-Mapping" class="headerlink" title="Impact Mapping"></a>Impact Mapping</h3><p>Goal -&gt; Who -&gt; What -&gt; How</p>
<p><img src="https://i.imgur.com/kEfRLZs.png"></p>
<p>從中找到 User Story，客戶小明（who），為了更方便的進行購物（how），我想要線上下單（what）。</p>
<h3 id="User-Story-Mapping"><a href="#User-Story-Mapping" class="headerlink" title="User Story Mapping"></a>User Story Mapping</h3><p><img src="https://i.imgur.com/HHvTOif.png"></p>
<h3 id="Specification-by-Example"><a href="#Specification-by-Example" class="headerlink" title="Specification by Example"></a>Specification by Example</h3><p>Ubiquitous Language: 不只是專有名詞文件化，更是所有人的一個共識，並落實到程式碼、測試、文件、溝通之中。例如：網頁最下面的區塊名稱，所有人一致認為要稱為「footer」，那文件中，就要根據 footer 為名稱主軸進行撰寫，而程式碼也是，如：<code>view_footer.html</code>。</p>
<p><img src="https://i.imgur.com/o0VMGw3.png"></p>
<p>如何進行 Ubiquitous Language 的建構：</p>
<ol>
<li>PO（PM）透過 User Story 告訴團隊需求故事。</li>
<li>團隊每個人寫下自己的想法，與針對該需求的案例，向 PO（PM）與團隊其他成員確認彼此對需求的認知是否一致。</li>
<li>整理、歸納，並將寫下的例子，整理成文件。<ul>
<li>是測試案例也是需求規格</li>
</ul>
</li>
<li>文件放置在所有人都能夠存取到的地方。</li>
<li>持續重構與整理文件。</li>
</ol>
<p>需求規格成果：</p>
<p><img src="https://i.imgur.com/C8KAvpd.png"></p>
<blockquote>
<p>很多開發團隊不知道測試團隊要測試什麼，而 QA 也不知道 dev 如何寫程式。 dev 會用自己認知的開發規格去寫程式，這時就很容易出現 bug</p>
</blockquote>
<h3 id="找出領域概念"><a href="#找出領域概念" class="headerlink" title="找出領域概念"></a>找出領域概念</h3><p>比如，找出業務活動中名詞與動詞。</p>
<p><img src="https://i.imgur.com/58RIpXn.png"></p>
<p>目前國外流行的兩種方法：</p>
<ul>
<li>Event Storming (<a target="_blank" rel="noopener" href="https://www.eventstorming.com/">https://www.eventstorming.com/</a>)</li>
<li>Domain Storytelling (<a target="_blank" rel="noopener" href="https://domainstorytelling.org/">https://domainstorytelling.org/</a>)<ul>
<li>台灣 DST 大神演講：<a target="_blank" rel="noopener" href="https://youtu.be/mGR0A5Jyolg?t=682">https://youtu.be/mGR0A5Jyolg?t=682</a></li>
</ul>
</li>
</ul>
<h3 id="定義問題與解決方案"><a href="#定義問題與解決方案" class="headerlink" title="定義問題與解決方案"></a>定義問題與解決方案</h3><p><img src="https://i.imgur.com/0wjyV1E.png"></p>
<p>第三方支付可能會發生很多問題(外部問題、網路問題、安全性….)：</p>
<p><img src="https://i.imgur.com/eJ9wy4J.png"></p>
<p>設計架構時，可以把外部金流的風險獨立出來成一個解決方案</p>
<p><img src="https://i.imgur.com/hJlnXMD.png"></p>
<p>再者，我們可能也不會只用一家金流，可能會需要建立一些重用的元件。</p>
<p>那我們應該怎麼做選擇呢？回頭前面，從架構特性開始看起。</p>
<h3 id="持續改善架構設計"><a href="#持續改善架構設計" class="headerlink" title="持續改善架構設計"></a>持續改善架構設計</h3><p>DDD 有助於持續改善架構設計</p>
<p><img src="https://i.imgur.com/0ZO8SdI.png"></p>
<p>寫程式的技巧在於「高內聚、低耦合」。但是，資料庫是一個很容易把相應的服務給綁住的耦合原件。</p>
<p><img src="https://i.imgur.com/FR33DEw.png"></p>
<h3 id="同步-非同步共生性"><a href="#同步-非同步共生性" class="headerlink" title="同步/非同步共生性"></a>同步/非同步共生性</h3><ul>
<li>同步：<br>[order service] &lt;- req/resp -&gt; [payment system]</li>
</ul>
<p>訂單/金流服務藕合性較高，互為影響，採用同歩需要較多考量</p>
<ul>
<li>非同步<br>[order service] &lt;- event -&gt; (= 事件通道 =) &lt;- event-&gt; [payment system]</li>
</ul>
<p><img src="https://i.imgur.com/8a6qlpU.png"></p>
<p>可能遇到 <code>Primary Key</code>, <code>Foreign Key</code> 難以同步等技術困難。</p>
<h3 id="持續改善架構設計-1"><a href="#持續改善架構設計-1" class="headerlink" title="持續改善架構設計"></a>持續改善架構設計</h3><p>資料庫依模組切離，減少耦合性</p>
<p>為了應付更複雜的業務場景，架構再一次演進: Mediator Pattern，讓服務之間不互相依賴</p>
<p><img src="https://i.imgur.com/6yWNKCf.png"></p>
<p>但缺點是架構變得更複雜，比如當一個地方出錯，你會需要更多機制去 debug，難度會比上一個架構難上更多。</p>
<p>不同的架構風格有不同優點與風險，架構師此時就是要讓團隊理解這項決定帶來的改變。商業模式、技術模式的改變，優缺點會一直改變。</p>
<h2 id="其他重要的"><a href="#其他重要的" class="headerlink" title="其他重要的"></a>其他重要的</h2><p><img src="https://i.imgur.com/2QxHDtM.png"></p>
<ul>
<li>投資基礎工程實務不可以省，開發主管不管如何都應該撥出時間去處理<ul>
<li>Test (unit, integrated, e2e)</li>
<li>CI/CD</li>
<li>Infra as code</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/wiAFdKc.png"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://www.infoq.cn/minibook/soqDsU3Mm9L39CKK6zVp?utm_source=rss&utm_medium=article&fbclid=IwAR3ecuP_Kt1aEkfk4HB0qGnGwZnnN5LAjDxW-SSkEmdj2Bcav6zFUvS7aDU">架构师</a></li>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/0eryDfF6QGmxwgkyWaRF2g?view">2021-05-22 技術管理者論壇 Session 2 - 商業與技術的平衡</a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%9E%B6%E6%A7%8B%E5%B8%AB/#more" title="架構">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E5%88%86%E7%B5%84%E6%8D%95%E6%8D%89/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E5%88%86%E7%B5%84%E6%8D%95%E6%8D%89/">正規表示法（Regular Expression, Regex）- 分組捕捉</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Regex/" rel="tag">Regex</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>可以使用 () 來將規則表示式分組，除了作為子規則表示式之外，還可以搭配量詞使用。</p>
<p>例如想要驗證電子郵件格式，允許的使用者名稱開頭要是大小寫英文字元，之後可搭配數字，規則表示式可以寫為 ^[a-zA-Z]+\d<em>，因為 @ 後網域名稱可以有數層，必須是大小寫英文字元或數字，規則表示式可以寫為 ([a-zA-Z0-9]+.)+，其中使用 () 群組了規則表示式，之後的 + 表示這個群組的表示式符合一次或多次，最後要是 com 結尾，整個結合起來的規則表示式就是 ^[a-zA-Z]+\d</em>@([a-zA-Z0-9]+\.)+com。</p>
<p>若有字串符合了被分組的規則表示式，字串會被捕捉（Capture），以便在稍後回頭參考（Back reference），在這之前，必須知道分組計數，如果有個規則表示式 ((A)(B(C)))，其中有四個分組，這是遇到的左括號來計數，所以四個分組分別是：</p>
<ol>
<li>((A)(B(C)))</li>
<li>(A)</li>
<li>(B(C))</li>
<li>(C)<br>分組回頭參考時，是在 \ 後加上分組計數，表示參考第幾個分組的比對結果。</li>
</ol>
<p>例如，\d\d 要求比對兩個數字，(\d\d)\1 的話，表示要輸入四個數字，輸入的前兩個數字與後兩個數字必須相同，例如輸入 1212 會符合，12 因為符合 (\d\d) 而被捕捉至分組 1，\1要求接下來輸入也要是分組 1 的內容，也就是 12；若輸入 1234 則不符合，因為 12 雖然符合 (\d\d) 而被捕捉，然而 \1 要求接下來的輸入也要是 12，然而接下來的數字是 34，因而不符合。</p>
<hr>
<p>再來看個實用的例子，[“‘][^”‘]*[“‘] 比對單引號或雙引號中 0 或多個字元，但沒有比對兩個都要是單引號或雙引號，([“‘])[^”‘]*\1 則比對出前後引號必須一致。</p>
<p>規則表示式中的 (?…) 代表擴充標記（Extension notation），括號中首個字元必須是?，而這之後的字元（也就是…的部份），進一步決定了規則表示式的組成意義。</p>
<p>如果不需要分組計數，只是想使用 () 來定義某個子規則，可以使用 (?:…) 來表示不捕捉分組。</p>
<p>例如，若只是想比對郵件位址格式，不打算捕捉分組，可以使用 ^[a-zA-Z]+\d*@(?:[a-zA-Z0-9]+.)+com。<br>在規則表示式複雜之時，善用 (?:…) 來避免不必要的捕捉分組，對於效能也會有很大的改進。</p>
<hr>
<p>如果想比對出的對象，之後必須跟隨或沒有跟隨著特定文字，可以使用 (?=…) 或 (?!…)，分別稱為 lookahead 與 negative lookahead。例如分別比對出來的名稱最後必須有 Lin：</p>
<p><img src="https://i.imgur.com/hAqyZHR.jpg"></p>
<p>分組捕捉<br>如果將上圖中的 (?=Lin) 改為 (?!Lin)，就會比對出 Monica。</p>
<hr>
<p>相對地，如果想比對出的對象，前面必須有或沒有著特定文字，可以使用 (?&lt;=…) 或 (?&lt;!…)，分別稱為 lookbehind 與 negative lookbehind。</p>
<p><img src="https://i.imgur.com/dINhBFG.jpg"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://openhome.cc/Gossip/Regex/Group.html">Openhome - 分組捕捉</a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E5%88%86%E7%B5%84%E6%8D%95%E6%8D%89/#more" title="正規表示法（Regular Expression, Regex）- 分組捕捉">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E5%AD%97%E5%85%83%E3%80%81%E5%AD%97%E5%85%83%E9%A1%9E/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E5%AD%97%E5%85%83%E3%80%81%E5%AD%97%E5%85%83%E9%A1%9E/">正規表示法（Regular Expression, Regex）- 字元、字元類</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Regex/" rel="tag">Regex</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>規則表示式中的兩類基本字元符號為「字面字元（Literals）」與「詮譯字元（Metacharacters）」。</p>
<p>字面字元是指按照字面意義比對的字元，例如指定 Orz 時，指的是三個字元 O、r、z 連續出現的規則；詮譯字元是不按照字面比對，在不同情境有不同意義的字元。</p>
<p>例如 ^ 是詮譯字元，規則表示式 ^Orz 是指行首後接續出現 Orz 的規則，也就是此時 ^ 表示一行的開頭，而不是比對 ^ 這個字元；但是規則表示式 [^Orz] 用來表示指不包括 O 或 r 或 z，也就是在 [] 中時，^ 表示非之後幾個字元之一的情況。</p>
<table>
<thead>
<tr>
<th>字面字元</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>Orz</td>
<td>三個字元 O、r、z 連續出現的字串才符合條件</td>
</tr>
<tr>
<td><strong>詮譯字元</strong></td>
<td><strong>效果</strong></td>
</tr>
<tr>
<td>[^Orz]</td>
<td>用來表示指不包括 O 或 r 或 z，也就是在 [] 中時，<br>^ 表示非之後幾個字元之一的情況</td>
</tr>
</tbody></table>
<p>詮譯字元在規則表示式中有特殊意義，例如： <code>$ ^ * ( ) + = &#123; &#125; [ ] | \ : . ?</code> 等，若要比對這些字元，則必須加上轉義（Escape）符號，例如要比對 $ 字元，必須使用 \$。如果不確定哪些標點符號字元要加上轉義符號，可以在每個標點符號前加上\，例如比對逗號也可以寫 \,。</p>
<p>如果規則表示式為 XY，那麼表示比對「X 之後要跟隨著 Y」，如果想表示「X 或 Y」，可以使用 <code>X|Y</code>，如果有多個字元要以「或」的方式表示，例如「X 或 Y 或 Z」，可以使用字元類（Character class）表示為 [XYZ]。</p>
<hr>
<p>規則表示式中，多個字元可以歸類在一起，成為一個<font color="FF0000">字元類</font>，字元類會比對文字中是否有「任一個」字元符合字元類中某個字元。規則表示式中被放在<code>[]</code>中的字元就成為一個字元類。例如，若字串為 Justin1Monica2Irene3Bush，你想要找到 1 或 2 或 3 來切割字串，規則表示式可撰寫為 [123]。</p>
<p>規則表示式 123 連續出現字元 1、2、3，然而 [] 中的字元是「或」的概念，也就是 [123] 表示「1 或 2 或 3」，| 在字元類別只是個普通字元，不會被當作「或」來表示。</p>
<p>字元類中可以使用連字號<code>-</code>作為字元類詮譯字元，表示一段文字範圍，例如要比對文字中是否有 1 到 5 任一數字出現，規則表示式為 [1-5]，要比對文字中是否有 a 到 z 任一字母出現，規則表示式為 [a-z]，要比對文字中是否有 1 到 5、a 到 z、M 到 W 任一字元出現，規則表示式可以寫為 [1-5a-zM-W]。</p>
<p>字元類中可以使用 ^ 作為字元類詮譯字元，[^] 則為反字元類（Negated character class），例如 [^abc] 會比對 a、b、c 以外的字元。</p>
<p>以下為字元類的幾個表示範例：</p>
<table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>[abc]</td>
<td>a 或 b 或 c 任一字元</td>
</tr>
<tr>
<td>[^abc]</td>
<td>a、b、c 以外的任一字元</td>
</tr>
<tr>
<td>[a-zA-Z]</td>
<td>a 到 z 或 A 到 Z 任一字元</td>
</tr>
<tr>
<td>[a-d[m-p]]</td>
<td>a 到 d 或 m 到 p 任一字元（聯集），等於 [a-dm-p]</td>
</tr>
<tr>
<td>[a-z&amp;&amp;[def]]</td>
<td>a 到 z 且是 d、e、f 的任一字元（交集），等於 [def]</td>
</tr>
<tr>
<td>[a-z&amp;&amp;[^bc]]</td>
<td>a 到 z 且不是 b 或 c 的任一字元（減集），等於 [ad-z]</td>
</tr>
<tr>
<td>[a-z&amp;&amp;[^m-p]]</td>
<td>a 到 z 且不是 m 到 p 的任一字元，等於 [a-lq-z]</td>
</tr>
</tbody></table>
<p>有些字元類很常用，例如經常會比對是否為 0 到 9 的數字，可以撰寫為 [0-9]，或是撰寫為 \d，這類字元被稱為字元類縮寫或預定義字元類（Predefined character class），它們不用被包括在 [] 之中，底下列出可用的預定義字元類：</p>
<table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td><code>.</code></td>
<td>任一字元（不包括換行、多位元組字元）</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>比對任一數字字元，即 [0-9]</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>比對任一非數字字元，即 [^0-9]</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>比對任一空白字元，即 [\t\n\x0B\f\r]</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>比對任一非空白字元，即 [^\s]</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>比對任一 ASCII 字元，即 [a-zA-Z0-9_]</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>比對任一非 ASCII 字元，即 [^\w]</td>
</tr>
</tbody></table>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://openhome.cc/Gossip/Regex/Character.html">Openhome - 字元、字元類</a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E5%AD%97%E5%85%83%E3%80%81%E5%AD%97%E5%85%83%E9%A1%9E/#more" title="正規表示法（Regular Expression, Regex）- 字元、字元類">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    



    <div class='text-center pagination'>
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
    </div>



    <div class="hidden">
        <!-- 加载文章阅读对应的统计功能，评论自带的那种 -->
        
    </div>



        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
        <div class="sticky-area">
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
</aside>
            
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分類目錄</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/123/">123</a><span class="category-list-count">1</span></li></ul></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>標籤</h4>
      <div class="tag-clouds">
        <a href="/tags/Coding-Tips/" style="font-size: 0.7em;">Coding Tips</a> <a href="/tags/OOP/" style="font-size: 0.6em;">OOP</a> <a href="/tags/Operating-System/" style="font-size: 0.6em;">Operating System</a> <a href="/tags/PHP/" style="font-size: 0.6em;">PHP</a> <a href="/tags/Regex/" style="font-size: 0.7em;">Regex</a> <a href="/tags/System-Design/" style="font-size: 0.6em;">System Design</a> <a href="/tags/coding-Tips/" style="font-size: 0.6em;">coding Tips</a> <a href="/tags/front-end/" style="font-size: 0.65em;">front-end</a> <a href="/tags/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99-code/" style="font-size: 0.65em;">可不可以不要寫糙 code</a> <a href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" style="font-size: 0.75em;">当然我在扯淡</a> <a href="/tags/%E5%BF%85%E5%8B%9D-IT-%E5%8D%81%E5%85%AB%E6%8B%9B/" style="font-size: 0.6em;">必勝 IT 十八招</a> <a href="/tags/%E8%AC%9B%E5%BA%A7%E5%8F%83%E8%88%87%E5%BF%83%E5%BE%97/" style="font-size: 0.6em;">講座參與心得</a> <a href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" style="font-size: 0.8em;">閱讀心得</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2021/09/03/hello-world/"><i class="fa  fa-book"></i> Hello World</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E4%BB%80%E9%BA%BC%E6%98%AF%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E5%8F%8B%E5%A5%BD/"><i class="fa  fa-book"></i> 什麼是對使用者友好</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%20%E7%B3%BB%E5%88%97%20%E7%AC%AC%208%20%E7%AF%87%20-%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%A8%BB%E8%A7%A3/"><i class="fa  fa-book"></i> 可不可以不要寫糙 code 系列 第 8 篇 - 不必要的註解</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%20-%20Introducation/"><i class="fa  fa-book"></i> 作業系統 - Introducation</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%E7%B3%BB%E5%88%97%20-%20%E5%A6%82%E4%BD%95%E5%AF%AB%E9%AB%98%E5%93%81%E8%B3%AA%20function/"><i class="fa  fa-book"></i> 可不可以不要寫糙 code系列 - 如何寫高品質 function </a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <li><a href="mailto:nagicheng@gmail.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        <li><a target="_blank" rel="nofollow" href="https://www.facebook.com/https://www.facebook.com/profile.php?id=100004983279906"><i class="fa fa-facebook-official"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://cn.linkedin.com/in/https://www.linkedin.com/in/nagikon/"><i class="fa fa-linkedin-square"></i></a></li>
                        
                        <li><a target="_blank" rel="nofollow" href="https://github.com/https://github.com/NagiKon"><i class="fa fa-github"></i></a></li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2021 Treeboのブログ 版權所有.</li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by Treebo.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>





    <script defer src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>


    <script defer src="/js/kr-dark.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>