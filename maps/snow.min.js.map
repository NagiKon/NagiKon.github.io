{"version":3,"sources":["snow.js"],"names":["window","kr","notMobile","snowConf","flakeCount","minDist","color","size","speed","opacity","stepsize","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","canvas","document","getElementById","ctx","getContext","mX","mY","flakes","width","innerWidth","height","innerHeight","snow","clearRect","i","flake","x","y","x2","y2","dist","Math","sqrt","xcomp","ycomp","deltaV","velX","velY","cos","step","stepSize","fillStyle","reset","beginPath","arc","PI","fill","floor","random","addEventListener","e","clientX","clientY","push","angle","init"],"mappings":"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","file":"../js/snow.min.js","sourcesContent":["// 移动端默认关闭\r\nwindow.kr?.notMobile && (()=>{\r\n    let snowConf = {};\r\n    //-------------------参数设置区 开始-------------------\r\n        snowConf.flakeCount = 100;\r\n        snowConf.minDist = 150;\r\n        snowConf.color = \"255, 255, 255\";\r\n        snowConf.size = 2;\r\n        snowConf.speed = 0.5;\r\n        snowConf.opacity = 0.2;\r\n        snowConf.stepsize = .5;\r\n    //-------------------参数设置区 结束-------------------\r\n    const requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function(callback){window.setTimeout(callback, 1000/60);};\r\n    window.requestAnimationFrame = requestAnimationFrame;\r\n    const canvas = document.getElementById(\"snow\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const flakeCount = snowConf.flakeCount;\r\n    let mX = -100, mY = -100;\r\n    let flakes = [];\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    const snow = ()=>{\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        const minDist = snowConf.minDist;\r\n        for (let i = 0; i < flakeCount; i++){\r\n            let flake = flakes[i];\r\n            const x = mX, y = mY;\r\n            const x2 = flake.x, y2 = flake.y;\r\n            const dist = Math.sqrt((x - x2)*(x - x2) + (y - y2)*(y - y2));\r\n            if (dist < minDist) {\r\n                const force  = minDist / (dist*dist);\r\n                const xcomp  = (x - x2) / dist;\r\n                const ycomp  = (y - y2) / dist;\r\n                const deltaV = force / 2;\r\n                flake.velX -= deltaV * xcomp;\r\n                flake.velY -= deltaV * ycomp;\r\n             } else {\r\n                flake.velX *= 0.98;\r\n                if (flake.velY < flake.speed && (flake.speed - flake.velY > .01)) {\r\n                    flake.velY += (flake.speed - flake.velY) * .01;\r\n                }\r\n                flake.velX += Math.cos(flake.step += .05) * flake.stepSize;\r\n            }\r\n            ctx.fillStyle = \"rgba(\" + snowConf.color + \", \" + flake.opacity + \")\";\r\n            flake.y += flake.velY;\r\n            flake.x += flake.velX;\r\n            if(flake.y >= canvas.height || flake.y <= 0){\r\n                reset(flake);\r\n            }\r\n            if(flake.x >= canvas.width || flake.x <= 0){\r\n                reset(flake);\r\n            }\r\n            ctx.beginPath();\r\n            ctx.arc(flake.x, flake.y, flake.size, 0, Math.PI*2);\r\n            ctx.fill();\r\n        }\r\n        requestAnimationFrame(snow);\r\n    };\r\n    const reset = (flake)=>{\r\n        flake.x       = Math.floor(Math.random()*canvas.width);\r\n        flake.y       = 0;\r\n        flake.size    = (Math.random()*3)+2;\r\n        flake.speed   = (Math.random()*1)+0.5;\r\n        flake.velY    = flake.speed;\r\n        flake.velX    = 0;\r\n        flake.opacity = (Math.random()*0.5)+0.3;\r\n    };\r\n    const init = ()=>{\r\n        for(let i = 0; i < flakeCount; i++){\r\n            const x       = Math.floor(Math.random()*canvas.width);\r\n            const y       = Math.floor(Math.random()*canvas.height);\r\n            const size    = (Math.random()*3) + snowConf.size;\r\n            const speed   = (Math.random()*1) + snowConf.speed;\r\n            const opacity = (Math.random()*0.5) + snowConf.opacity;\r\n            flakes.push({\r\n                speed: speed,\r\n                velX: 0, velY: speed,\r\n                x: x, y: y,\r\n                size: size,\r\n                stepSize: (Math.random()) / 30 * snowConf.stepsize,\r\n                step: 0,\r\n                angle: 180,\r\n                opacity: opacity\r\n            });\r\n        }\r\n        snow();\r\n    };\r\n    document.addEventListener(\"mousemove\", (e)=>{mX = e.clientX, mY = e.clientY});\r\n    window.addEventListener(\"resize\",()=>{canvas.width = window.innerWidth; canvas.height = window.innerHeight;});\r\n    init();\r\n})();"]}