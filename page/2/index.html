<!DOCTYPE html>
<html lang="zh-TW">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/site_logo.webp">
  <title>Treeboのブログ</title>
  <meta name="author" content="Treebo" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="技術部落格" />
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Treeboのブログ">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Treeboのブログ">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="http://example.com/images/site_logo.webp">
<meta property="article:author" content="Treebo">
<meta property="article:tag" content="技術部落格">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/site_logo.webp">
<meta name="twitter:site" content="@null">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" type="text/css" media="all">
  
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.min.css" type="text/css" media="all">
  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['G-34GCMGPCS5']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXX-Y', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner.webp');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('/images/bg.webp');
        }
      }
    
  </style>
  
<meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首頁</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-file"></i>歸檔</a></li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">Treeboのブログ</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>Treeboのブログ</h2> <br />
                        <span>學習與反思；交流與批判</span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            
    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E7%B8%BD%E8%A1%A8/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E7%B8%BD%E8%A1%A8/">正規表示法（Regular Expression, Regex）- 總表</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Regex/" rel="tag">Regex</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td><code>.</code></td>
<td>任一字元（不包括換行、多位元組字元）</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>比對任一數字字元，即 [0-9]</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>比對任一非數字字元，即 [^0-9]</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>比對任一空白字元，即 [\t\n\x0B\f\r]</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>比對任一非空白字元，即 [^\s]</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>比對任一 ASCII 字元，即 [a-zA-Z0-9_]</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>比對任一非 ASCII 字元，即 [^\w]</td>
</tr>
</tbody></table>
<hr>
<table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td><code>X?</code></td>
<td>X 項目出現一次或沒有</td>
</tr>
<tr>
<td><code>X*</code></td>
<td>X 項目出現零次或多次</td>
</tr>
<tr>
<td><code>X+</code></td>
<td>X 項目出現一次或多次</td>
</tr>
<tr>
<td><code>X&#123;n&#125;</code></td>
<td>X 項目出現 n 次</td>
</tr>
<tr>
<td><code>X&#123;n,&#125;</code></td>
<td>X 項目至少出現 n 次</td>
</tr>
<tr>
<td><code>X&#123;n,m&#125;</code></td>
<td>X 項目出現 n 次但不超過 m 次</td>
</tr>
</tbody></table>
<hr>
<table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>一行開頭</td>
</tr>
<tr>
<td><code>$</code></td>
<td>一行結尾</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>單字邊界</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>非單字邊界</td>
</tr>
<tr>
<td><code>\A</code></td>
<td>輸入開頭</td>
</tr>
<tr>
<td><code>\G</code></td>
<td>前一個符合項目結尾</td>
</tr>
<tr>
<td><code>\Z</code></td>
<td>非最後終端機（final terminator）的輸入結尾</td>
</tr>
<tr>
<td><code>\z</code></td>
<td>輸入結尾</td>
</tr>
</tbody></table>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E7%B8%BD%E8%A1%A8/#more" title="正規表示法（Regular Expression, Regex）- 總表">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E9%87%8F%E8%A9%9E%E3%80%81%E9%8C%A8%E9%BB%9E/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E9%87%8F%E8%A9%9E%E3%80%81%E9%8C%A8%E9%BB%9E/">正規表示法（Regular Expression, Regex）- 量詞、錨點</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Regex/" rel="tag">Regex</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>如果想使用者輸入的手機號碼格式是否為 XXXX-XXXXXXX，其中 X 為數字，雖然規則表示式可以使用 \d\d\d\d-\d\d\d\d\d\d，不過更簡單的寫法是 \d{4}-\d{6}，{n} 是貪婪量詞（Greedy quantifier）表示法的一種，表示前面的項目出現 n 次。</p>
<p>底下列出可用的貪婪量詞：</p>
<table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td><code>X?</code></td>
<td>X 項目出現一次或沒有</td>
</tr>
<tr>
<td><code>X*</code></td>
<td>X 項目出現零次或多次</td>
</tr>
<tr>
<td><code>X+</code></td>
<td>X 項目出現一次或多次</td>
</tr>
<tr>
<td><code>X&#123;n&#125;</code></td>
<td>X 項目出現 n 次</td>
</tr>
<tr>
<td><code>X&#123;n,&#125;</code></td>
<td>X 項目至少出現 n 次</td>
</tr>
<tr>
<td><code>X&#123;n,m&#125;</code></td>
<td>X 項目出現 n 次但不超過 m 次</td>
</tr>
</tbody></table>
<hr>
<p>貪婪量詞之所以貪婪，是因為看到貪婪量詞時，比對器（Matcher）會把符合量詞的文字全部吃掉，再逐步吐出（back-off）文字，看看是否符合貪婪量詞後的規則表示式，如果吐出的部份也符合就比對成功。</p>
<p>簡單來說，貪婪量詞會儘可能地找出長度最長的符合文字。</p>
<p>例如文字 <strong>xfooxxxxxxfoo</strong>，若使用規則表示式 <font color="FF0000" size="4"><b>.*foo</b></font> 比對，比較器根據  <font color="FF0000" size="4"><b>.*</b></font> 吃掉了整個 xfooxxxxxxfoo，之後吐出 foo 符合 foo 部份，得到的符合字串就是整個 <strong>xfooxxxxxxfoo</strong>。</p>
<hr>
<p>若在貪婪量詞表示法後加上<font color="FF0000" size="4"><b>?</b></font>，會成為逐步量詞（Reluctant quantifier），又常稱為懶惰量詞，或非貪婪（non-greedy）量詞（相對於貪婪量詞來說），比對器是一邊吃一邊比對文字是否符合量詞與之後的規則表示式。</p>
<p>簡單來說，逐步量詞會儘可能地找出長度最短的符合文字。</p>
<p>例如文字 xfooxxxxxxfoo 若用規則表示式 <font color="FF0000" size="4"><b>.*?foo</b></font> 比對，比對器在吃掉 xfoo 後發現符合 .*? 與 foo，接著繼續吃掉 xxxxxxfoo 發現符合 .*? 與 foo，得到 xfoo 與 xxxxxxfoo 兩個符合文字。</p>
<hr>
<p>有些工具或語言支援獨吐量詞（Possessive quantifier），例如 Java（然而 Python、JavaScript 不支援），也就是在貪婪量詞表示法後加上 +，比對器會將符合量詞的文字全部吃掉，而且不再回吐（因此才稱為獨吐）。</p>
<p>例如文字 xfooxxxxxxfoo，若使用規則表示式 x*+foo 比對，x 符合 x*+ 被吃了，後續 foo 符合 foo，得到 xfoo 符合，接著 xxxxxx 符合 x*+ 被吃了，後續 foo 符合 foo，得到 xxxxxxfoo 符合。</p>
<p>文字 xfooxxxxxxfoo，若使用規則表示式 .*+foo 比對，整個 xfooxxxxxxfoo 會因符合 .*+ 全被比對器吃了，沒有文字可再用於比對 foo，結果就是沒有任何文字符合。</p>
<p>如果有個文字 Justin dog Monica doggie Irene，使用表示式 dog 的話，會符合到 dog 與 doggie 前的 dog 部份：</p>
<p>量詞、錨點<br>你可以使用 <code>\b</code> 標出單字邊界，例如 <code>\bdog\b</code>，這就只會比對出 dog 單字：</p>
<p>量詞、錨點<br>邊界比對用來表示文字必須符合指定的邊界條件，也就是定位點，因此這類表示式也常稱為錨點（Anchor），底下列出規則表示式中可用的邊界比對：</p>
<table>
<thead>
<tr>
<th>Regex</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>一行開頭</td>
</tr>
<tr>
<td><code>$</code></td>
<td>一行結尾</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>單字邊界</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>非單字邊界</td>
</tr>
<tr>
<td><code>\A</code></td>
<td>輸入開頭</td>
</tr>
<tr>
<td><code>\G</code></td>
<td>前一個符合項目結尾</td>
</tr>
<tr>
<td><code>\Z</code></td>
<td>非最後終端機（final terminator）的輸入結尾</td>
</tr>
<tr>
<td><code>\z</code></td>
<td>輸入結尾</td>
</tr>
</tbody></table>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://openhome.cc/Gossip/Regex/QuantifierAnchor.html">Openhome - 量詞、錨點</a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88Regular%20Expression,%20Regex%EF%BC%89-%20%E9%87%8F%E8%A9%9E%E3%80%81%E9%8C%A8%E9%BB%9E/#more" title="正規表示法（Regular Expression, Regex）- 量詞、錨點">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E6%B8%AC%E8%A9%A6%E7%9A%84%E9%81%93%E7%90%86/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E6%B8%AC%E8%A9%A6%E7%9A%84%E9%81%93%E7%90%86/">測試的道理</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" rel="tag">当然我在扯淡</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <ol>
<li><p>不要以為你處處顯示出「重視程式碼質量」的態度，就能提高程式碼的質量。光有態度和口號是不解決問題的，程式碼的質量不會因為你重視它就得到提升，也不會因為你採取了措施（比如測試，靜態分析）就一定會得到改善。</p>
</li>
<li><p>在程式和演算法定型之前，不要寫測試。過早的測試會導致工作變得複雜，無法寫出優雅的程式碼，只有在程式不再需要大幅度改動之後，才是逐漸加入測試的時候。</p>
</li>
<li><p>不要為了寫測試而改變本來清晰簡單的寫程式方式。</p>
</li>
<li><p>不要測試「實現細節」，因為那等同於寫了兩遍同樣的程式碼。測試應該只需要滿足基本的性質，如：「sqrt（4）應該等於 2」，而不是去測試具體的平方算法步驟。</p>
</li>
<li><p>並不是每修復一個 bug 就要寫測試，假設這個 bug 很簡單，只要修復了就不可能在出現的情況下，多寫測試反而是減慢工作進度。</p>
</li>
<li><p>只有當現有的測試沒有抓住程式必須滿足的重要性質時，才需要寫測試。</p>
</li>
<li><p>避免使用 mock，特別是多層的 mock。你只需要為每一個 module 準備一些輸入（包括邊界情況），確保它們的輸出符合要求。然後你把這些 module 像 pipe 一樣連接起來，形成一個更大的module，測試它是否符合輸入輸出要求，不需要做多層的 mock。</p>
</li>
<li><p>「不要過分重視自動化測試，人工測試也是測試。」，過分的重視測試自動化的原因，往往在於一個不切實際的假設，他們假設錯誤會頻繁的再次發生，所以自動化了可以省下人的力氣。但是其實，一旦一個 bug 被修好，它反復出現的機會不會很大的。過分的要求測試自動化，不但延緩了工程進度，讓程式設計師惱火，效率低下，而且失去了人工測試的精確性。</p>
</li>
<li><p>「避免寫太長，太耗時的測試。」，本來用很小的輸入就可以測試到需要的性質，有人卻總喜歡給一個很大的輸入，下意識的以為這樣更加靠譜，結果這測試每次都會消耗大量的build 時間，而其實達到的效果跟很小的輸入沒有任何區別。</p>
</li>
<li><p>「一個測試只測試一個方面，避免重複測試。」，如果一個測試只測一個方面，不重複測同一個部分，那麼你就可以很快的根據失敗的測試，發現出問題的部分和位置。</p>
</li>
<li><p>避免通過比較字串來進行測試。這種測試是非常脆弱的，很容易因為微小的改動而使大量測試失敗，導致很多的測試需要做不必要的修改。正確的做法，應該是進行結構化的比較，如果你要把標準結果存成 JSON，那麼你應該先 parse 出 JSON 所表示的對象，然後再進行結構化的對比。</p>
</li>
<li><p>「測試並不能幫助後人」。如果你的程式碼寫得很亂，就算你測試在多，後人無法理解，甚至會不知道到底是程式碼本身有問題，還是測試有問題。無論如何，後人都必須先理解原本的程式碼邏輯，知道它在做什麼，否則不可能做出正確的修改，就算你有再嚴密的測試也一樣。</p>
</li>
<li><p>測試不能保証程式碼完全不被改錯，實際上它們防止程式碼被改錯的作用力是非常弱的。</p>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.yinwang.org/blog-cn/2016/09/14/tests">测试的道理</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E6%B8%AC%E8%A9%A6%E7%9A%84%E9%81%93%E7%90%86/#more" title="測試的道理">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E7%95%B6%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1%E7%9A%84%E6%95%99%E8%AA%A8/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E7%95%B6%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1%E7%9A%84%E6%95%99%E8%AA%A8/">當然我在扯淡的教誨</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" rel="tag">当然我在扯淡</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <ol>
<li><p>使用者也是系統的模組</p>
</li>
<li><p>一個好的工具，應該只有少數幾條需要記憶的規則</p>
</li>
<li><p>學習計算機（或者任何其它工具），應該「只選對的，不選難的」記憶一堆的命令，烏七八糟的工具用法，最後腦子裡什麼也不會留下。學習原理性的東西，才是永遠不會過時的。</p>
</li>
<li><p>去除頭腦裡的宗教，偏激，仇恨和鄙視。每次仇恨一個東西，你就失去了向它學習的機會。</p>
</li>
<li><p>在腳本裡面盡可能的使用通常的程式設計原則。</p>
</li>
<li><p>不要為了縮短程式碼，而減少可讀性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上面這種你少打了個 =，你也不知道容易出現出乎意料的結果。</span></span><br><span class="line"><span class="keyword">if</span> (y = <span class="number">0</span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (y) &#123; ... &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>很多問題的”存在”，其實是因為人們的”固定思維”，他們看不到問題的”根源”和”因果關係”，經常假設某種”先決條件”（A）的存在，然後堅定不移地相信由此”導致”的問題（B）的存在，如下圖：</p>
<blockquote>
<h3 id="A-—–-gt-B"><a href="#A-—–-gt-B" class="headerlink" title="A —–&gt; B"></a>A —–&gt; B</h3><p>但其實只要解決 A，就不存在 B 的問題了。</p>
</blockquote>
</li>
<li><p>古老而美麗的理念，也許能夠給予思想的啟迪，可是未必就能在工程中達成理想的效果。</p>
</li>
<li><p>測試的建構，應該是在程式主體已經成形的情況下才能進行。如果程式屬於創造性的設計，主體尚未成形，過早加入的測試反而會大幅度的降低開發效率。</p>
</li>
<li><p>沒有任何一種程式語言值得你用畢生的精力去”精通”它，”精通”其實代表著”腦殘”。</p>
<blockquote>
<p>每個人都應該學習多種程式語言，這樣才不會讓自己的思想受到單一語言的約束，而沒辦法接受新的，更加先進的思想。這就像每個人都應該學至少一種外語一樣，否則你就會身陷在自己民族的思維方式中，有時候民族傳統的思想會讓你深陷無須有的痛苦卻無法自拔。</p>
</blockquote>
</li>
<li><p>程式語言並不是工具，而是一種材料，工具應該是指 IDE 或文字編輯器。自己寫的程式最後會成為產品的一部份，針對適當的產品（應用）使用適當的材料（程式語言）。</p>
</li>
<li><p>大部分的教育過於重視在”證明”，卻忽略了比證明更重要的東西–”原因”。如果只知道證明而不去思考它背後的原因，到最後只會被困在他人的理論中，而無法舉一反三。</p>
</li>
<li><p>跟真正的大師學習，而不是跟他們的徒弟。如果你真的要學一個演算法，就應該直接去讀那演算法的發明者的論文，而不是轉述過來的「二手知識」。二手的知識往往把發明者原來的動機和思路都給去掉了， 只留下蒼白無味，沒有什麼啟發意義的“最後結果”。</p>
</li>
<li><p>不要因為名氣，而忽視掉真正重視你的人。</p>
</li>
<li><p>不要”以難為豪”，很多人誤以為打字的快，程式就寫得好。掌握整體的 Picture，而不是去記一些奇怪的東西。</p>
</li>
<li><p>讓一個人去修他人的 BUG 是”效率十分低”的作法，每個人都有自己的 coding style 和思維，強破一個人去理解他人的思維是有問題的，特別是製造 BUG 的那個人的思維是個屎。最好的方法是讓他自己去改，直到他覺得有問題來問你時，在跟他解釋你的想法。</p>
</li>
<li><p>所謂「物件導向語言」，其實就是就是加了一點抽象能力（class, object）的 Procedural programming。它本質上是一個 <code>map</code>。物件導向的思想本身是好的，但把每個 function 都視為是物件的一部份，導致原本 functional programing 就能做到的事情，變得必須拐好幾個彎才能做到，如：<code>Design Pattern</code>。</p>
</li>
<li><p>再高明的方法論，也無法代替真正的、精華的計算機科學教育。</p>
</li>
<li><p>「避免重複」並不等於「抽象」。 有時候適當的重複程式碼是有好處的，防止過早抽象的方法叫做「等待」，過早的提出抽象，很可能到後來才發現它們的行為其實是完全不同的，會造成綁手綁腳的結果。如果程式碼只重複使用兩次，也不要提前抽出來，因為它可能只用那麼兩次。</p>
</li>
<li><p>在程式和演算法定型之前，不要寫測試。過早的測試會導致工作變得複雜，無法寫出優雅的程式碼，只有在程式不再需要大幅度改動之後，才是逐漸加入測試的時候。</p>
</li>
<li><p>「一個測試只測試一個方面，避免重複測試。」，如果一個測試只測一個方面，不重複測同一個部分，那麼你就可以很快的根據失敗的測試，發現出問題的部分和位置。</p>
</li>
<li><p>人們常說，程式碼讀的時候比寫的時候多得多，所以要想語言好用省事，我們應該更加重視讀的時候，而不是寫的時候。</p>
</li>
<li><p>洞察力是透過現象看到本質的能力，有洞察力的人很容易得到經驗，然而有經驗的人卻不一定擁有洞察力（盲目）。</p>
</li>
<li><p>在當 PM 時應該先解釋為什麼要做這件事，它的重要性，這樣才能讓人理解，才能尊重工程師的智商。</p>
</li>
<li><p>公司裡自然有不同水平的人，雜事一般都應該交給水平比較低的，或者剛畢業的新手去搗鼓，或者正好有人感興趣，那當然最好。當然對於新手我們也應該尊重，如果他折騰了一段時間，跟你反映這個東西問題太多不好用，你就應該考慮放棄這個東西，也許有其它更好的選擇。</p>
</li>
<li><p>高薪不一定能請到高手，但低薪一定會請到猴子。盡量善待高手，讓他在他所擅長的領域發揮。</p>
</li>
<li><p>其實 IT 界沒這麼多「領域」，每一個領域需要的知識，不過都是計算機科學：資料結構，演算法，程式語言，再加上一點工程經驗。</p>
</li>
<li><p>事物和技術並沒有新舊之分，只有合理與不合理的差別。</p>
</li>
<li><p>不要加入可有可無的功能，而損害關鍵功能的可靠性。</p>
</li>
<li><p>盡量不要去動 legacy code，因為它是前人所留下來的智慧結晶，即便它很醜，但卻也是經過現實的淬鍊。如果直接把 legacy code 砍掉重練，通常很難復原它的效果，反而會製造出更多的 bug ，因為前人所踩的坑，我們不見得可以完全掌握。</p>
</li>
<li><p>對待 legacy code 的方式是，盡量讓自己的程式碼可以在 legacy code 中替換與更改。在不動到原本架構的情況下解決 bug。如果是 legacy code 本身引發的問題，就一小部分一小部分的慢慢去更改，逐漸將它轉換成自己的邏輯，並確定不失去原始程式碼語意的情況下修改它。</p>
</li>
<li><p>看書的時候要<code>廣度搜尋</code>，每個問題每本書的作者對它的見解深度都是不同的，有些時候<strong>經典教材</strong>其實只是出版的早，有些問題其實作者自己也沒有看透。因此，看書不要從頭看到尾，如果有一個主題看得你很痛苦，你應該去尋找其他更好理解的資源(身邊的他人、網路文章、其他書籍等等)。</p>
</li>
<li><p>不要片面看中文的文章，也應該搜尋與它相關的其他語言文章，來進行各種資料的對比，這樣更容易得到準確的訊息。</p>
</li>
<li><p>先有想法（演算法），才有程式碼。程式碼不能清晰表達一個人的思想，與其看人家的程式碼，不如直接問他的想法。不要對他人說”自己去看程式碼”，沒有人應該被迫去閱讀其他人的程式碼，寫出程式碼的人有義務講清楚自己程式碼背後的想法。</p>
</li>
<li><p>程式碼與成果都是可以白嫖的。但一個人的想法可以從對話中得出那個人的斤兩。</p>
</li>
<li><p>所謂的「成功」是決定在自己而非他人，做自己想做的，吸引認同自己，尊重自己的人，而不是一群勢利的賤人。</p>
</li>
<li><p>一個企業如果出現這種不尊重他人，且以居高臨下的方式命令他人的現象，不管他的地位如何，這皆會導致提拔奸人，流失人才，決策錯誤，導致企業走向末路。應該從制度上防止這種現象的發生，進行反對這種風氣的宣傳和講座，制定相應的規章制度，給員工提供方便而私密的渠道越級匯報這種問題。管理者應該請存在這種問題的員工談話，加以警告，要求他們改變態度，告訴他們公司不容忍這種現象。這樣主動預防，形成良好的文化，成為大家喜歡工作的地方。</p>
</li>
<li><p>想要嚴肅地學習任何領域，都應該選擇質量過關的裝備。如果選擇品質次要或是太差的，很可能因為體驗太差導致失去興趣，甚至放棄學習。如果覺得貴，可以一次只購買一小部分來嘗試，等學習到一個段落以後，再使用較便宜的裝備。如果沒啥太大的差別，就可以用比較便宜的，如果不習慣用便宜的，再換回貴的就好了。</p>
</li>
<li><p>一個完全沒有摸到門路的人，是沒有資格給出他人「做到極致」的評價的，因為他根本不知道「極致」是什麼。日本人並沒有把事情做到極致，而只是摸到了正確的門路，不斷改進。只要方向正確，就會比瞎蒙亂撞，不用心，裝模作樣的人強很多了，以至於這些人認為日本人已經做到了「極致」。<strong>人所關心的事情，不應該是做到極致，而應該是真心做事，摸到正確的門路，不要完全走錯了方向。</strong></p>
</li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E7%95%B6%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1%E7%9A%84%E6%95%99%E8%AA%A8/#more" title="當然我在扯淡的教誨">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E7%B7%A8%E7%A8%8B%E7%9A%84%E6%99%BA%E6%85%A7/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E7%B7%A8%E7%A8%8B%E7%9A%84%E6%99%BA%E6%85%A7/">編程的智慧</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Coding-Tips/" rel="tag">Coding Tips</a>, <a class="tag-none-link" href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" rel="tag">当然我在扯淡</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>[toc]</p>
<h2 id="反覆思考程式碼"><a href="#反覆思考程式碼" class="headerlink" title="反覆思考程式碼"></a>反覆思考程式碼</h2><blockquote>
<p>看一位作家的水平，不是看他發表了多少文字，而要看他扔掉了多少稿紙。</p>
</blockquote>
<p>寫程式也是一樣的概念。好的程式設計師，會反覆的 review 自己的程式碼。就像文學作品一樣，程式碼不可能一氣呵成，靈感總是零零星星陸陸續續的到來。再厲害的程式設計師，也需要經過一段時間，才能發現最簡單優雅的寫法。有時候你反復修改了程式碼，發現以為已經沒啥好改的，但放著過幾個月再回來看，你總能發現一些可以改進的地方。</p>
<p>所以如果反復修改程式碼已經不再有進展，那麼你可以暫時把它放下。過幾個星期或者幾個月再回頭來看，也許就有煥然一新的靈感。 這樣反反復復很多次之後，你就積累起了靈感和智慧，從而能夠在遇到新問題的時候直接朝正確，或者接近正確的方向前進。</p>
<h2 id="寫優雅的程式碼"><a href="#寫優雅的程式碼" class="headerlink" title="寫優雅的程式碼"></a>寫優雅的程式碼</h2><p>優雅的程式碼有一個特徵是，它的邏輯大體上看起來，是分明的樹狀結構（tree）。 這是因為程式所做的幾乎一切事情，都是訊息的傳遞和分支。你可以把程式碼看成是一個電路，電流經過導線，分流或者匯合。 如果你是這樣思考的，你的程式碼裡就會比較少出現只有一個分支的 if 語句，它看起來就會像這個樣子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (...) &#123;</span><br><span class="line">  <span class="keyword">if</span> (...) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (...) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>else</code> 裡面可能會出現少量重複的程式碼，但這樣的結構，邏輯卻非常緊密清晰。使用這種形式，可以避免漏掉 <code>corner case</code>。不要讓你的 <code>control flow</code> 往下掉。</p>
<h2 id="寫模組化的程式碼"><a href="#寫模組化的程式碼" class="headerlink" title="寫模組化的程式碼"></a>寫模組化的程式碼</h2><p>真正的模組化，並不是文字語意上的，而是邏輯層面上的。一個模組應該像電路晶片一樣，他有定義良好的<strong>輸入</strong>和<strong>輸出</strong>。實際上一種很好的模組化方法叫做「function（函式）」，每一個 function 都有明確的輸入（參數）和輸出（返回值），同一個文件可以包含<strong>多個 function</strong>。因此，沒有必要把程式碼分開放在多個文件或者目錄裡面，同樣也可以完成模組化。</p>
<p>良好的模組化條件：</p>
<ul>
<li>避免寫太過長的 function。</li>
<li>製造小的通用 function - 如果發現其他 function 有重複的程式碼，可以把它提出來變成獨立的 function。</li>
<li>每個 function 只做一件簡單的事情。</li>
<li>避免使用 <code>global variable</code> 和 <code>class member</code> 來傳遞訊息，盡量使用 <code>local variable</code> 和 <code>parameter</code>。</li>
</ul>
<p>不好的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    String x;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">findX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      ...</span><br><span class="line">      x = ...;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     findX();</span><br><span class="line">     ...</span><br><span class="line">     print(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先，<code>findX()</code>，把一個值寫入成員 <code>x</code>。 然後，使用 <code>x</code> 的值。 這樣，<code>x</code> 就變成了 <code>findX</code> 和 <code>print</code> 之間的數據通道。 由於 <code>x</code> 屬於 <code>class A</code>，這樣程式就失去了模組化的結構。由於這兩個 function 依賴於 <code>x</code>，它們不再有明確的輸入和輸出，而是依賴 local data。<code>findX</code> 和<code>foo</code> 不再能夠離開 <code>class A</code> 而存在，而且由於 class member 還有可能被其他程式碼改變，程式碼變得難以理解，難以確保正確性。</p>
<p>好的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">findX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    x = ...;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String x = findX();</span><br><span class="line">    print(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="寫可讀的程式碼"><a href="#寫可讀的程式碼" class="headerlink" title="寫可讀的程式碼"></a>寫可讀的程式碼</h2><blockquote>
<p>少寫註解，盡量讓程式碼去解釋自己的行為。<br>寫 why，不寫 what，偶爾寫寫 How。</p>
</blockquote>
<ol>
<li>有意義的命名 function 和 variable。</li>
<li>Local variable 應該盡量接近他使用的地方。</li>
</ol>
<p>不好的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> index = ...;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  bar(index);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由於中間都沒使用過 <code>index</code>，也沒有改變他的值，所以其實這個 variable，可以挪到接近使用它的地方。</p>
<p>好的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">int</span> index = ...;</span><br><span class="line">  bar(index);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Local variable 名子應該要簡短，配合上第二點可以使你的程式碼更具有解釋性。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad</span></span><br><span class="line"><span class="keyword">boolean</span> successInDeleteFile = deleteFile(<span class="string">&quot;foo.txt&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (successInDeleteFile) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line"><span class="keyword">boolean</span> success = deleteFile(<span class="string">&quot;foo.txt&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (success) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>不要重複使用 local variable，盡量讓它的作用域減少不必要的增大。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad</span></span><br><span class="line">String msg;</span><br><span class="line"><span class="keyword">if</span> (...) &#123;</span><br><span class="line">  msg = <span class="string">&quot;succeed&quot;</span>;</span><br><span class="line">  log.info(msg);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  msg = <span class="string">&quot;failed&quot;</span>;</span><br><span class="line">  log.info(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line"><span class="keyword">if</span> (...) &#123;</span><br><span class="line">  String msg = <span class="string">&quot;succeed&quot;</span>;</span><br><span class="line">  log.info(msg);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  String msg = <span class="string">&quot;failed&quot;</span>;</span><br><span class="line">  log.info(msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>複雜的邏輯要提出去，讓程式碼變得簡短好懂。</li>
<li>把複雜的表達式提出去。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad</span></span><br><span class="line">Pizza pizza = makePizza(crust(salt(), butter()),</span><br><span class="line">   topping(onion(), tomato(), sausage()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line">Crust crust = crust(salt(), butter());</span><br><span class="line">Topping topping = topping(onion(), tomato(), sausage());</span><br><span class="line">Pizza pizza = makePizza(crust, topping);</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>在合理的地方進行換行。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad</span></span><br><span class="line"><span class="keyword">if</span> (someLongCondition1() &amp;&amp; someLongCondition2() &amp;&amp; someLongCondition3() &amp;&amp;</span><br><span class="line"> someLongCondition4()) &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line"><span class="keyword">if</span> (someLongCondition1() &amp;&amp;</span><br><span class="line">   someLongCondition2() &amp;&amp;</span><br><span class="line">   someLongCondition3() &amp;&amp;</span><br><span class="line">   someLongCondition4()) &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Bad</span></span><br><span class="line">log.info(<span class="string">&quot;failed to find file &#123;&#125; for command &#123;&#125;, with exception &#123;&#125;&quot;</span>, file, command,</span><br><span class="line"> exception);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line">log.info(<span class="string">&quot;failed to find file &#123;&#125; for command &#123;&#125;, with exception &#123;&#125;&quot;</span>,</span><br><span class="line"> file, command, exception);</span><br></pre></td></tr></table></figure>

<h2 id="寫簡單的程式碼"><a href="#寫簡單的程式碼" class="headerlink" title="寫簡單的程式碼"></a>寫簡單的程式碼</h2><blockquote>
<p>並不是程式語言提供什麼，你就一定要用上它。</p>
</blockquote>
<ul>
<li>避免使用 <code>i++</code>, <code>++i</code>, <code>i--</code>, <code>--i</code>，使用的情況應該侷限於迴圈和只有它自己是單獨一行的情況下。</li>
<li>永遠不要省略括號</li>
<li>避免使用 <code>continue</code> 和 <code>break</code>，會造成迴圈的邏輯和終止條件變得複雜，難以確保正確。<ol>
<li>如果出現了 <code>continue</code>，把 <code>continue</code> 的條件反向，就可以消除 <code>continue</code>。</li>
<li>如果出現了 <code>break</code>，把 <code>break</code> 的條件，合併到迴圈頂部的終止條件裡，從而去掉<code>break</code>。</li>
<li>有時候你可以把 <code>break</code> 替換成 <code>return</code>，從而去掉 <code>break</code>。</li>
<li>如果以上都失敗了，可以把迴圈中較複雜的部份提取出來，做成 function 減少複雜度，之後 <code>continue</code> 和 <code>break</code> 都可以去掉了。</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad</span></span><br><span class="line">List&lt;String&gt; goodNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String name: names) &#123;</span><br><span class="line">  <span class="keyword">if</span> (name.contains(<span class="string">&quot;bad&quot;</span>)) &#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  goodNames.add(name);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line">List&lt;String&gt; goodNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String name: names) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!name.contains(<span class="string">&quot;bad&quot;</span>)) &#123;</span><br><span class="line">    goodNames.add(name);</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// Bad</span></span><br><span class="line"><span class="keyword">while</span> (condition1) &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">if</span> (condition2) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line"><span class="keyword">while</span> (condition1 &amp;&amp; !condition2) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Bad</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasBadName</span><span class="params">(List&lt;String&gt; names)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (String name: names) &#123;</span><br><span class="line">        <span class="keyword">if</span> (name.contains(<span class="string">&quot;bad&quot;</span>)) &#123;</span><br><span class="line">            result = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasBadName</span><span class="params">(List&lt;String&gt; names)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (String name: names) &#123;</span><br><span class="line">        <span class="keyword">if</span> (name.contains(<span class="string">&quot;bad&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="正確處理錯誤"><a href="#正確處理錯誤" class="headerlink" title="正確處理錯誤"></a>正確處理錯誤</h2><p>錯誤處理是一個古老的問題，可是經過了幾十年，還是很多人沒搞明白。Unix 的系統 API 手冊，一般都會告訴你可能出現的返回值和錯誤訊息。 比如，Linux 的 read 系統調用手冊裡面有如下內容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RETURN VALUE </span><br><span class="line">On success, the number of bytes read is returned...</span><br><span class="line"></span><br><span class="line">On error, -1 is returned, and errno is set appropriately.</span><br><span class="line"></span><br><span class="line">ERRORS</span><br><span class="line"></span><br><span class="line">EAGAIN, EBADF, EFAULT, EINTR, EINVAL, ...</span><br></pre></td></tr></table></figure>

<p>很多初學者，都會忘記檢查 read 的返回值是否為-1，覺得每次調用 read 都得檢查返回值很繁瑣，不檢查貌似也相安無事。這種想法其實是很危險的。</p>
<p>如果函數的返回值告訴你，要碼返回一個正數，表示讀到的數據長度，要碼返回 -1，那麼你就必須要對這個 -1 作出相應的，有意義的處理。千萬不要以為你可以忽視這個特殊的返回值，因為它是一種“可能性”。程式碼漏掉任何一種可能出現的情況，都可能產生意想不到的災難性結果。</p>
<p>另外，try catch 裡面，應該只包含少量的程式碼。比如，如果 <code>foo</code> 和 <code>bar</code> 都有可能發生 <code>異常 A</code>，明確分辨是哪一個 function 出了錯，可以大大減少你 debug 的時間。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  foo();</span><br><span class="line">  bar();</span><br><span class="line">&#125; <span class="keyword">catch</span> (A e) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Good</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  foo();</span><br><span class="line">&#125; <span class="keyword">catch</span> (A e) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  bar();</span><br><span class="line">&#125; <span class="keyword">catch</span> (A e) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="正確處理-null-指標"><a href="#正確處理-null-指標" class="headerlink" title="正確處理 null 指標"></a>正確處理 null 指標</h2><p>Null 其實根本不是一個合法的對象。它不是一個 String，不是一個 Integer，也不是一個自定義的 class。null 的類型本來應該是 NULL，也就是 null 自己。根據這個基本觀點，我們推導出以下原則：</p>
<ul>
<li>盡量不要產生 null 指標</li>
<li>盡量不要使用 null 來初始化變數</li>
<li>函數盡量不要返回 null，如果你要表達「沒有、出錯了」的結果，盡量使用 Java 的 exception 機制。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">find</span><span class="params">()</span> <span class="keyword">throws</span> NotFoundException </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (...) &#123;</span><br><span class="line">    <span class="keyword">return</span> ...;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NotFoundException();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其實「沒有」和「出錯了」是兩件完全不同的事情，用 null 來表示「出錯了」是種誤用，出錯的時候應該拋出 exception 而不是 null。</p>
<h2 id="防止過度工程"><a href="#防止過度工程" class="headerlink" title="防止過度工程"></a>防止過度工程</h2><blockquote>
<ol>
<li>先把眼前的問題解決掉，解決好，再考慮將來的擴展問題。</li>
<li>先寫出可用的程式碼，反复推敲，再考慮是否需要重用的問題。</li>
<li>先寫出可用，簡單，明顯沒有 bug 的程式碼，再考慮測試的問題。</li>
</ol>
</blockquote>
<p>過度工程即將出現的一個重要訊號，就是當你過度的思考“將來”，考慮一些還沒有發生的事情，還沒有出現的需求。比如：</p>
<ul>
<li>如果我們將來有了上百萬行程式碼，有了幾千名員工，這樣的工具就不夠用了</li>
<li>將來我可能需要這個功能，所以我現在就把程式碼寫來放在那裡</li>
<li>將來很多人要擴充這片程式碼，所以現在我們就讓它變得可重用</li>
</ul>
<p>這就是為什麼很多軟體專案如此復雜，實際上沒做多少事情，卻為了所謂的“將來”，加入了很多不必要的複雜性。眼前的問題還沒解決，就被“將來”給拖垮了。人們都不喜歡目光短淺的人，然而在現實的工程中，有時候你就是得看近一點，把手頭的問題先搞定了，再談以後擴展的問題。</p>
<p>另外一種過度工程的來源，是過度的關心“程式碼重用”。很多人“可用”的程式碼還沒寫出來，就在關心“重用”。為了讓程式碼可以重用，最後被自己搞出來的各種框架捆住手腳，最後連可用的程式碼就沒寫好。如果可用的程式碼都寫不好，又何談重用呢？很多一開頭就考慮太多重用的工程，到後來被人完全拋棄，沒人用了，因為別人發現這些程式碼太難懂了，自己從頭開始寫一個，反而省好多事。</p>
<p>過度地關心“測試”，也會引起過度工程。有些人為了測試，把本來很簡單的程式碼改成“方便測試”的形式，結果引入很多複雜性，以至於本來一下就能寫對的程式碼，最後複雜不堪，出現很多 bug。</p>
<p>世界上有兩種“沒有bug”的程式碼。一種是“沒有明顯的 bug 的程式碼”，另一種是“明顯沒有 bug 的程式碼”。第一種情況，由於程式碼複雜不堪，加上很多測試，各種 coverage，貌似測試都通過了，所以就認為程式碼是正確的。第二種情況，由於程式碼簡單直接，就算沒寫很多測試，你一眼看去就知道它不可能有 bug。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.yinwang.org/blog-cn/2015/11/21/programming-philosophy">编程的智慧</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E7%B7%A8%E7%A8%8B%E7%9A%84%E6%99%BA%E6%85%A7/#more" title="編程的智慧">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E8%AB%87%20Linux%EF%BC%8CWindows%20%E5%92%8C%20Mac/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E8%AB%87%20Linux%EF%BC%8CWindows%20%E5%92%8C%20Mac/">談 Linux，Windows 和 Mac</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" rel="tag">当然我在扯淡</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <ul>
<li>Linux的Unix的和裡面包含了一些非常糟糕的設計。不要被的Unix的教條主義者嚇倒。學不會有些東西很多時候不是你的錯，而是Linux的的錯，是「Unix的思想」的錯，不要浪費時間去學習太多工具的用法，鑽研稀奇古怪的命令行。那些貌似難的，複雜的東西，特別要小心分析。</li>
<li>學習作業系統最好的辦法是學會（真正的）程式設計思想，而不是去學習各種古怪的工具。所有作業系統，資料庫，網路，以至於 WEB 的設計思想（和缺陷），幾乎都能用程式語言的思想簡單的解釋。</li>
</ul>
<p>一個好的工具，應該<strong>只有少數幾條需要記憶的規則</strong>，就像象棋一樣。而這些源於 Unix 的工具卻像是魔鬼棋或者三國殺，有太多的，無聊的，人造的規則。有些人鄙視圖形界面，鄙視IDE，鄙視含有垃圾回收的語言（比如 Java），鄙視一切“容易”的東西。他們卻不知道，把自己沉浸在別人設計的繁複規則中，是始終無法成為大師的。就像一個人，他有能力學會各種魔鬼棋的規則，卻始終無法達到象棋大師的高度。</p>
<p>所以，容易的東西不一定是壞的，而困難的東西也不一定是好的。學習計算機（或者任何其它工具），應該「只選對的，不選難的」記憶一堆的命令，烏七八糟的工具用法，最後腦子裡什麼也不會留下。<strong>學習原理性的東西，才是永遠不會過時的</strong>。</p>
<blockquote>
<p><strong>去除頭腦裡的宗教，偏激，仇恨和鄙視。每次仇恨一個東西，你就失去了向它學習的機會。</strong></p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.yinwang.org/blog-cn/2013/03/07/linux-windows-mac">談 Linux，Windows 和 Mac</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E8%AB%87%20Linux%EF%BC%8CWindows%20%E5%92%8C%20Mac/#more" title="談 Linux，Windows 和 Mac">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E9%87%8D%E6%A7%8B/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E9%87%8D%E6%A7%8B/">重構</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/Coding-Tips/" rel="tag">Coding Tips</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h2 id="原則"><a href="#原則" class="headerlink" title="原則"></a>原則</h2><ol>
<li>避免冗長的 <code>God Object</code>、<code>參數列表</code>、<code>函式長度</code>、<code>看不懂的變數名稱</code></li>
<li>如果參數或是專屬某個 <code>data</code> 的相關 <code>function</code> 太多太長，就把它獨立成一個 <code>class</code>。</li>
<li><code>if / switch</code> 如果沒有過於複雜或太多的操作與頻繁的需求變動，沒有必要把它特地多型化。</li>
<li>減少重複程式碼的數量，為了可讀性，可接受部分重複</li>
</ol>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ol>
<li><p>如果 <code>method</code> 數量過多，而且無法分離時，可將整包的 <code>method</code> 轉換成 <code>class</code>。但要考慮耦合與複雜度問題。<br> <a target="_blank" rel="noopener" href="https://refactoring.guru/replace-method-with-method-object">Replace Method with Method Object</a></p>
</li>
<li><p>當 <code>parameter</code> 過多時，可以把參數與相關操作方法包裝成 <code>class</code>。</p>
</li>
<li><p>如果舊的演算法，有更好讀的寫法，可進行更換。例如：傳統 <code>for-loop</code> 變成使用函數式語言 <code>each</code> 的方式在尋訪。<br> <a target="_blank" rel="noopener" href="https://refactoring.guru/substitute-algorithm">Substitute Algorithm</a></p>
</li>
<li><p>當使用的 <code>library</code> 無法滿足需求時，可自己再包一個 <code>function</code>，如果變動較大的話可包裝成 <code>class</code>。<br> <a target="_blank" rel="noopener" href="https://refactoring.guru/introduce-foreign-method">Introduce Foreign Method</a></p>
</li>
<li><p>將陣列包裝成物件。<br> <a target="_blank" rel="noopener" href="https://refactoring.guru/replace-array-with-object">Replace Array with Object</a></p>
<ul>
<li><code>jdfiosdjfiodsjfi</code></li>
</ul>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://refactoring.guru/refactoring">Refactoring Guru</a></li>
<li><a target="_blank" rel="noopener" href="https://sourcemaking.com/refactoring">Source Making</a></li>
<li><a target="_blank" rel="noopener" href="https://refactoring.com/catalog/">Refactoring</a></li>
</ol>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E9%87%8D%E6%A7%8B/#more" title="重構">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/PHP/%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95/%E9%97%9C%E6%96%BC%20private%20%E7%9A%84%20visibility%20-%20%E4%BB%A5%20PHP%20%E7%82%BA%E7%AF%84%E4%BE%8B/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/PHP/%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95/%E9%97%9C%E6%96%BC%20private%20%E7%9A%84%20visibility%20-%20%E4%BB%A5%20PHP%20%E7%82%BA%E7%AF%84%E4%BE%8B/">關於 private 的 visibility - 以 PHP 為範例</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                            <li>
                                <i class="fa fa-folder"></i>
                                分類於
                                <a class="label-link" href="/categories/PHP/">PHP</a>, <a class="label-link" href="/categories/PHP/123/">123</a>
                            </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/OOP/" rel="tag">OOP</a>, <a class="tag-none-link" href="/tags/PHP/" rel="tag">PHP</a>, <a class="tag-none-link" href="/tags/coding-Tips/" rel="tag">coding Tips</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <p>Private 的 visibility 只限於被宣告的那個 class。換句話說，除了外部以外，那些繼承了這個 class 的 subclass 一樣也無法訪問到被宣告成 private 的 variable 和 method。因此，即便 parent class 和 child class 擁有同樣的 private method，child class 的 method 也不會 override parent class 的任何 private method。</p>
<p>那為什麼會發生這樣的事情呢？是因為「scope 的不同」，private method/variable 的訪問權被限制在被宣告當下的那個 class 的 scope 下，所以 parent class 和 child class 的 private method/variable 因為 scope 的不同，不會產生 override 的現象。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">base</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">inherited</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;overridden();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">overridden</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;base&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">child</span> <span class="keyword">extends</span> <span class="title">base</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">overridden</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;child&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$test</span> = <span class="keyword">new</span> child();</span><br><span class="line"><span class="variable">$test</span>-&gt;inherited(); <span class="comment">// base</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>從上面的例子我們可以看到，child class 向下呼叫 parent class 的 method 的時候，因為 overriden 這個 method 的 scope 在 parent class，所以它最後 echo 出來的是 <code>base</code>。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">base</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">inherited</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;overridden();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">overridden</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;base&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">child</span> <span class="keyword">extends</span> <span class="title">base</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">overridden</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;child&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$test</span> = <span class="keyword">new</span> child();</span><br><span class="line"><span class="variable">$test</span>-&gt;inherited(); <span class="comment">// child</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二個例子，我們將 visibility 改成 protected 以後，child class 可以訪問到 parent class 的 method，因此對 overriden 這個 method 進行了 override，所以它最後 echo 出來的是 <code>child</code>。</p>
<h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>上述對 private method/variable 的例子，可以用其他的程式語言來實現如：<code>Java</code>、<code>C++</code>。最後所得出的結果也是一樣的。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.php.net/manual/en/language.oop5.visibility.php">PHP Visibility</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/PHP/%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95/%E9%97%9C%E6%96%BC%20private%20%E7%9A%84%20visibility%20-%20%E4%BB%A5%20PHP%20%E7%82%BA%E7%AF%84%E4%BE%8B/#more" title="關於 private 的 visibility - 以 PHP 為範例">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    

    
    
        <article>
            <div class="kratos-hentry kratos-post-inner clearfix index-post">
                <div class="kratos-entry-thumb-new">
                    <a href="/2021/05/22/%E4%BB%8A%E6%99%9A%EF%BC%8C%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E%20Web%20%E5%89%8D%E7%AB%AF%E6%95%88%E8%83%BD%E5%84%AA%E5%8C%96%E5%A4%A7%E8%A3%9C%E5%B8%96/">
                        
                    </a>
                </div>
                <header class="kratos-entry-header">
                    <h1 class="text-center"><a class="kratos-entry-title" href="/2021/05/22/%E4%BB%8A%E6%99%9A%EF%BC%8C%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E%20Web%20%E5%89%8D%E7%AB%AF%E6%95%88%E8%83%BD%E5%84%AA%E5%8C%96%E5%A4%A7%E8%A3%9C%E5%B8%96/">今晚，我想來點 Web 前端效能優化大補帖</a></h1>
                    
                    <ul class="kratos-post-meta text-center">
                        <li>
                            <i class="fa fa-calendar"></i>
                            2021-05-22
                        </li>
                        
                        
                            <li>
                                <i class="fa fa-tags"></i>
                                <a class="tag-none-link" href="/tags/front-end/" rel="tag">front-end</a>, <a class="tag-none-link" href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" rel="tag">閱讀心得</a>
                            </li>
                        
                        
                            <!-- 当前仅支持valine/waline自带的统计功能 -->
                            
                        
                        
                            <!-- 当前仅支持waline自带的统计功能 -->
                            
                        
                    </ul>
                </header>
                <hr />
                <div class="kratos-post-content">
                    <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>效能是工程師在維護專案時非常重視的要點，不論是 Web 還是 App，甚至是需要大量運算資源的機器學習，都會想追求極致的效能，用高效率換取高價值。</p>
<p>不過，並不是所有的應用都需要追求效能，有時候獲取效能的背後也許需要花上昂貴的成本，比較起來是得不償失的，因此在進行效能調校前應該先好好衡量進行優化的成本（時間、困難度都需要考慮），有時候先求有再求好反而是較佳的方案。</p>
<p>另外一件事就是效能優化沒有所謂的終點，這是一段追求「快還要更快」的過程。</p>
<h2 id="Performance-Analyzers"><a href="#Performance-Analyzers" class="headerlink" title="Performance Analyzers"></a>Performance Analyzers</h2><p>在進行效能優化以前，我們得先找出效能瓶頸出自哪裡，這時候我們可以使用一些 performance analyzer 來幫助我們找到問題，其中較有名的是 Lighthouse 與 PageSpeed。</p>
<h2 id="Core-Web-Vital"><a href="#Core-Web-Vital" class="headerlink" title="Core Web Vital"></a>Core Web Vital</h2><p>Google 根據長期以來大量的使用者體驗制定出了 Core Web Vital 的指標，Google 更指出若 75% 以上的使用者在網站中的瀏覽體驗都能夠通過以上 3 種指標，就能夠大幅的提升使用者的搜尋體驗，甚至能夠讓原本因等待而離開的使用者減少 24%！</p>
<h2 id="LCP-Largest-Contentful-Paint-—-顯示最大內容元素所需時間-速度"><a href="#LCP-Largest-Contentful-Paint-—-顯示最大內容元素所需時間-速度" class="headerlink" title="LCP (Largest Contentful Paint ) — 顯示最大內容元素所需時間 (速度)"></a>LCP (Largest Contentful Paint ) — 顯示最大內容元素所需時間 (速度)</h2><p>LCP 是計算網頁可視區 (viewport) 中最大元件的載入時間，也就是頁面的主要內容被使用者看到的時間，是速度的指標。</p>
<p>不過可視區內最大的元素並不是固定不變的</p>
<p><img src="https://i.imgur.com/qiCyFWo.png"></p>
<p>上圖的頁面在載入時一開始可視區的最大元素是左上角的文字，接下來隨著頁面載入變成了標題，最後變成了圖片，因為圖片是可視區最大的元素了，因此 LCP 就會以該圖片所需要載入的時間做計算。</p>
<h3 id="如何優化-LCP"><a href="#如何優化-LCP" class="headerlink" title="如何優化 LCP"></a>如何優化 LCP</h3><h4 id="減少伺服器回應時間"><a href="#減少伺服器回應時間" class="headerlink" title="減少伺服器回應時間"></a>減少伺服器回應時間</h4><ul>
<li>針對主機效能優化</li>
<li>使用較近的 CDN</li>
<li>Cache</li>
<li>提早載入第三方資源</li>
</ul>
<h4 id="盡量避免-Blocking-Time"><a href="#盡量避免-Blocking-Time" class="headerlink" title="盡量避免 Blocking Time"></a>盡量避免 Blocking Time</h4><ul>
<li>降低 JavaScript blocking time</li>
<li>降低 CSS blocking time</li>
</ul>
<h4 id="避免使用客戶端渲染-CSR"><a href="#避免使用客戶端渲染-CSR" class="headerlink" title="避免使用客戶端渲染(CSR)"></a>避免使用客戶端渲染(CSR)</h4><ul>
<li>若必須使用 CSR ，建議優化 JavaScript ，避免渲染時使用太多資源</li>
<li>盡量在伺服器端完成頁面渲染，讓用戶端取得已渲染好的內容</li>
</ul>
<h2 id="FID-—-First-Input-Delay-首次輸入延遲-封鎖時間總計-互動性"><a href="#FID-—-First-Input-Delay-首次輸入延遲-封鎖時間總計-互動性" class="headerlink" title="FID — First Input Delay 首次輸入延遲/封鎖時間總計 (互動性)"></a>FID — First Input Delay 首次輸入延遲/封鎖時間總計 (互動性)</h2><p>輸入延遲 (Input Delay) 通常發生於瀏覽器的主執行序過度繁忙，而導致頁面內容無法正確地與使用者進行互動。舉例來說，可能瀏覽器正在載入一支相當肥大的 JavaScript 檔案，導致其他元素不能被載入而延遲可互動的時間。</p>
<h3 id="如何優化-FID"><a href="#如何優化-FID" class="headerlink" title="如何優化 FID"></a>如何優化 FID</h3><ul>
<li>減少 JavaScript 運作的時間</li>
<li>降低網站的 request 數並降低檔案大小</li>
<li>減少主執行序的工作</li>
<li>降低第三方程式碼的影響</li>
</ul>
<h2 id="CLS-—-Cumulative-Layout-Shift-累計版面配置轉移-穩定性"><a href="#CLS-—-Cumulative-Layout-Shift-累計版面配置轉移-穩定性" class="headerlink" title="CLS — Cumulative Layout Shift 累計版面配置轉移 (穩定性)"></a>CLS — Cumulative Layout Shift 累計版面配置轉移 (穩定性)</h2><p>有沒有遇過一種情況是當你在網頁中準備點擊一個按鈕或連結的瞬間，突然一個廣告被插入，讓你不小心點開別的網站，恨的牙癢癢的呢？這就是 CLS 這個指標想要避免的使用者體驗，如果不清楚以上情境的可以參考<a target="_blank" rel="noopener" href="https://web.dev/cls/">這篇</a></p>
<h3 id="如何避免-CLS"><a href="#如何避免-CLS" class="headerlink" title="如何避免 CLS"></a>如何避免 CLS</h3><ul>
<li>給予會比較慢載入的元素一個預設的寬度與高度</li>
</ul>
<h2 id="Code-Minimize-amp-Uglify"><a href="#Code-Minimize-amp-Uglify" class="headerlink" title="Code Minimize &amp; Uglify"></a>Code Minimize &amp; Uglify</h2><p>有時候你會想看看一些網頁的原始碼是怎麼運作的，不過當點選「檢查網頁原始碼」後，顯示出來的 code 有時卻讓你不知道這到底是哪個星球的程式語言。</p>
<p>不過其實這些看起來混亂的代碼其實就是我們寫出來的程式，雖然變數名稱跟邏輯似乎都跟我們原本開發時寫的不一樣，但它其實只是經過轉譯罷了。而這麼做主要的原因有兩個：</p>
<ul>
<li>變數跟 code 寫的越短，或是刪除不必要的空白，可以省掉不少瀏覽器 Parse 的時間，也就是提升前端程式的效能 — <strong>Minimize</strong></li>
<li>通常會打亂程式的邏輯，避免自家產品的 code 輕鬆的被別人拿去研究或抄襲 — <strong>Uglify</strong></li>
</ul>
<p>如果要試試看效果，可以參考如 <code>JavaScript Minifier</code> 或 <code>Uglify JS</code> 等網頁服務，但通常在開發時我們不會笨拙的手動貼 code 去 Minimize 或 Uglify，而是會利用如 <code>webpack</code> 、<code>gulp</code> 等打包工具替我們做這些事情。</p>
<h2 id="Image-Minimize-amp-理解-jpg、png、-svg-的使用時機"><a href="#Image-Minimize-amp-理解-jpg、png、-svg-的使用時機" class="headerlink" title="Image Minimize &amp; 理解 jpg、png、 svg 的使用時機"></a>Image Minimize &amp; 理解 jpg、png、 svg 的使用時機</h2><p>現今的網站免不了會需要載入大量的圖片，圖片也因此成為網站載入資源的很大一部分，換句話說就是對網站效能有著直接的影響。在考慮 Image Lazy Load 等技巧以前，我們可以先將圖片壓縮，透過減少檔案大小來加快載入時間，而壓縮又分為兩種狀況：</p>
<ul>
<li>有損壓縮：如 JPG，使用只取部分像素資料的方式來壓縮圖片大小，並且壓縮後是不可逆的。</li>
<li>無損壓縮：如 PNG，壓縮後不影響圖片品質。</li>
</ul>
<p>三種圖片類型各自比較有名的圖片壓縮服務有 <a target="_blank" rel="noopener" href="https://tinypng.com/">tiny-png</a>、<a target="_blank" rel="noopener" href="https://jakearchibald.github.io/svgomg/">svgomg</a>、<a target="_blank" rel="noopener" href="http://jpeg-optimizer.com/">jpeg-optimizer</a>。</p>
<p>而其實不同的圖片類型也有各自適合使用的時機，學會將不同類型圖片應用在適合的地方不僅可以提升使用者體驗或 UI 品質，某些狀況下也可以控制載入資源的大小而提升一點效能。這裡推薦一篇<a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10252501">文章</a>，說明得十分完整，除了有介紹各種圖片類型的適當使用時機外，也有介紹如響應式圖片、webp、Image CDN 等其他圖片優化技巧，非常推薦一讀。</p>
<h2 id="Critical-Render-Path-關鍵渲染路徑"><a href="#Critical-Render-Path-關鍵渲染路徑" class="headerlink" title="Critical Render Path 關鍵渲染路徑"></a>Critical Render Path 關鍵渲染路徑</h2><p>提到網頁前端的效能最佳化，我們得先了解網頁是如何渲染到頁面上的，從收到 HTML、CSS 和 JavaScript，再對程式碼進行必需的處理，到最後轉變為顯示像素的過程中還有許多中間步驟。將效能最佳化其實就是瞭解這些步驟中所有的活動，再經過最佳化，這就是所謂的「關鍵渲染路徑（Critical Render Path）」。</p>
<p><img src="https://i.imgur.com/FKAMlEJ.png"></p>
<p>根據上圖，我們可以大致理解出網頁渲染的流程為：</p>
<ul>
<li>讀取 HTML 後生成 DOM Tree</li>
<li>讀取 HTML 中的 CSS Link Tag 生成 CSSOM Tree</li>
<li>DOM Tree 與 CSSOM Tree 共同生成 Render Tree</li>
<li>根據 Render Tree 生成 Layout</li>
<li>最後 Paint 畫面</li>
</ul>
<p>當然，現今的 web app 不太可能只靠 HTML 跟 CSS 就完成，還是得靠 JavaScript 來修改網頁的內容、樣式、與使用者互動的行為。JavaScript 可以查詢及修改 DOM 和 CSSOM，在 CSSOM 執行完畢後，JavaScript 才會執行 。這邊給一個小 tip：如果可以的話，CSS file 盡快引入，JS 在 CSS 後引入，因為 JS的執行會導致網頁載入的暫停（不過有例外的非同步功能）。</p>
<p>一般我們要載入 JavaScript 檔案，通常會透過 <code>&lt;script&gt;</code> 這個 Tag 來達成，不過它的執行是同步的，也就是會導致網頁載入的暫停，如下圖：</p>
<p><img src="https://i.imgur.com/wH6aGwa.png"></p>
<p>但其實 script tag 的引入還有 async 跟 defer 這兩種方式：</p>
<ul>
<li><strong>async</strong> 會非同步去請求外部腳本，回應後停止解析執行腳本內容。</li>
<li><strong>defer</strong> 也會非同步請求外部腳本，但是等待瀏覽器解析完才執行。</li>
</ul>
<p><code>&lt;script async&gt;</code> 用於載入第三方函式庫等不需要動到 DOM 結構的狀況</p>
<p><img src="https://i.imgur.com/IxpV2sn.png"></p>
<p><code>&lt;script defer &gt;</code> 要整個頁面都下載及分析完成後才會執行，非常類似於把 JS 放在頁尾的情況</p>
<p><img src="https://i.imgur.com/6eL9xJC.png"></p>
<h2 id="Code-Splitting"><a href="#Code-Splitting" class="headerlink" title="Code Splitting"></a>Code Splitting</h2><p>Code Splitting 是一個非常重要的觀念，現代網頁程式漸漸走向使用框架以模組化方式來開發，即便會透過如 webpack 等 bundler 來 uglify、minimize、打包程式碼，當專案成長到一定程度時，程式 bundle size 仍然會變得過於肥大，導致 client side 的網頁載入時間變長，嚴重影響使用者體驗。Code Splitting 就是為了要解決單一 JS Bundle 過於肥大的問題，將原本單一的 bundle 切分成數個小 chunk，可以搭配平行載入，或者是有需要時才載入某些特定的 chink，又或是對一些不常變動的 chunk 個別做快取，來達到載入效能的優化。</p>
<p>較常見的 Code Splitting 又分為兩種方式 :</p>
<ul>
<li>抽離第三方套件</li>
<li>動態載入功能模組 Dynamic Import</li>
</ul>
<h3 id="抽離第三方套件"><a href="#抽離第三方套件" class="headerlink" title="抽離第三方套件"></a>抽離第三方套件</h3><p>抽離第三方套件又可以細分兩種方式：</p>
<ul>
<li>將所有第三方套件打包為單一檔案</li>
<li>將第三方套件打包為多個檔案</li>
</ul>
<h4 id="將所有第三方套件打包為單一檔案"><a href="#將所有第三方套件打包為單一檔案" class="headerlink" title="將所有第三方套件打包為單一檔案"></a>將所有第三方套件打包為單一檔案</h4><p>關於 webpack 的 bundle，可以先做一個最大的拆分：</p>
<ul>
<li>Application Bundle ：UI 與商業邏輯，跟我們寫的程式有關，是經常變動的部分。</li>
<li>Vendor Bundle ：第三⽅套件 / node_modules，不太會變動。</li>
</ul>
<p>拆分出 Vendor Bundle 是有好處的，主要是因為通常它變動的頻率相對較低，因此比較適合被 cache，而在 Vendor Bundle 被 cache 的狀況下由於減少了 Application Bundle 的⼤⼩，因此加快了再訪者的載入速度。採用這樣的方式的優點為邏輯簡單，缺點為更新任何第三方套件都會使快取失效。</p>
<h4 id="將第三方套件打包為多個檔案"><a href="#將第三方套件打包為多個檔案" class="headerlink" title="將第三方套件打包為多個檔案"></a>將第三方套件打包為多個檔案</h4><p>採用這種方式的優點是可以根據套件關聯性打包，減少套件更新時造成的延遲。缺點則是相較前面打包成單一檔案的方式，這種方式需要處理的邏輯複雜許多。</p>
<h3 id="動態載入功能模組-Dynamic-Import"><a href="#動態載入功能模組-Dynamic-Import" class="headerlink" title="動態載入功能模組 Dynamic Import"></a>動態載入功能模組 Dynamic Import</h3><p>大多數狀態下我們會在檔案的開頭引入需要用到的模組，這些模組通常在網頁載入時就被引入進來，這種方式被稱為 static import，然而當有以下兩種狀況的需求時，static import 卻不能滿足我們：</p>
<ul>
<li>模組名稱為動態變數時</li>
<li>需依照特定邏輯或特定時機引入時</li>
</ul>
<p>這時候可以運用與之相對的技術： Dynamic Import。所謂 Dynamic Import 代表的即是</p>
<blockquote>
<h2 id="需要用到某段程式碼時才透過網路載入-JS-bundle"><a href="#需要用到某段程式碼時才透過網路載入-JS-bundle" class="headerlink" title="需要用到某段程式碼時才透過網路載入 JS bundle"></a>需要用到某段程式碼時才透過網路載入 JS bundle</h2></blockquote>
<h2 id="Webpack-Bundle-Analyzer"><a href="#Webpack-Bundle-Analyzer" class="headerlink" title="Webpack Bundle Analyzer"></a>Webpack Bundle Analyzer</h2><p><img src="https://i.imgur.com/QwSVSXG.png"></p>
<p>透過 webpack-bundle-analyzer，我們可以透過視覺化分析專案有哪些 bundle chunk，各個 bundle chunk 的組成又為何，再針對可以改進的 bundle 進行優化。</p>
<p>（類似功能的工具還有如 <strong>WebpackVisualizerPlugin</strong>）</p>
<h2 id="Lazy-Load-Image"><a href="#Lazy-Load-Image" class="headerlink" title="Lazy Load Image"></a>Lazy Load Image</h2><p>稍早的 Image Minimize 段落中有提到圖片佔了網站資源相當大的比例，因此如果在網頁載入的瞬間就想把所有圖片都載入下來對效能是一個硬傷，這時候可以採用 lazy load 的方法去載入圖片，一開始只需載入部分的圖片，待現有圖片快要接觸到 viewport 的底部時再去動態載入新的圖片，例如 imgur 這種圖床網站就勢必會做圖片的 lazy load。</p>
<p>要實現 image 的 lazy load 主要有兩種方式：</p>
<ul>
<li>搭配 Intersection Observer web API : 偵測目標元素是不是與特定位置交會，交會時再去載入新的資源。(可以參考我很久以前寫的練習作業)</li>
<li>瀏覽器原生支援 (<a target="_blank" rel="noopener" href="https://web.dev/browser-level-image-lazy-loading/">參考連結</a>)</li>
</ul>
<h2 id="Virtualized-List"><a href="#Virtualized-List" class="headerlink" title="Virtualized List"></a>Virtualized List</h2><p>長列表（例如大量的文章列表）是網站中蠻常見的一個 feature，然而如果有 1000 篇文章，我們又將這些文章同時渲染的話，就必須生成 1000 個 dom 節點，更不用說文章結構通常是相對複雜的，像這樣同時渲染數量頗大的元素會有幾個明顯的缺點：</p>
<ul>
<li>載入時白屏時間會比較長</li>
<li>渲染了大量的 dom 節點的狀況下，在滾動事件觸發時會大大增加記憶體的用量</li>
<li>容易失幀，因為渲染很慢，所以無法維持瀏覽器的幀率，頁面會顯得卡頓</li>
<li>最慘的話網頁會失去響應</li>
</ul>
<p>而且這些問題在 Desktop 瀏覽器就會發生了，換作是手機瀏覽器只會讓問題變得更嚴重，因此這種狀況下我們應該優化長列表，提升使用者體驗。</p>
<p>virtualized list 就是優化長列表的一種技巧，名字聽起來很深奧，不過它的概念其實非常簡單：</p>
<blockquote>
<h3 id="用陣列儲存所有列表元素的位置，只渲染可視區-viewport-內的列表元素，當可視區滾動時，根據滾動的-offset-大小以及所有列表元素的位置，計算在可視區應該渲染哪些元素。"><a href="#用陣列儲存所有列表元素的位置，只渲染可視區-viewport-內的列表元素，當可視區滾動時，根據滾動的-offset-大小以及所有列表元素的位置，計算在可視區應該渲染哪些元素。" class="headerlink" title="用陣列儲存所有列表元素的位置，只渲染可視區 (viewport)內的列表元素，當可視區滾動時，根據滾動的 offset 大小以及所有列表元素的位置，計算在可視區應該渲染哪些元素。"></a>用陣列儲存所有列表元素的位置，只渲染可視區 (viewport)內的列表元素，當可視區滾動時，根據滾動的 offset 大小以及所有列表元素的位置，計算在可視區應該渲染哪些元素。</h3></blockquote>
<p><img src="https://i.imgur.com/KgPpFmQ.png"></p>
<p>以上圖來說，假設可視區最多只能顯示 6 個 item，那即使我們的列表總共有 1000 個，也只會渲染出現在可視區的 6 個元素，當原本被渲染的 item 移出可視區後，就會被 unmount 掉，避免前面說的同時生成一堆 dom 節點的狀況，也因此有效的解決了上面說的幾個缺點。</p>
<p>如果對如何實作一個 virtualized list 有興趣，可以參考<a target="_blank" rel="noopener" href="https://medium.com/ingeniouslysimple/building-a-virtualized-list-from-scratch-9225e8bec120">這篇文章</a>。</p>
<h2 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h2><p>開發專案免不了會下載第三方套件來節省自己重複造輪子的成本，然而也許某些狀況我們只會使用一個套件模組之中的特定幾個 function，其他的 function 幾乎都不會用到。不過如果我們為了這幾個 function 而要載入整個模組，就似乎有點得不償失了，這時候 Tree shaking 會是解救我們的技巧。</p>
<h3 id="什麼是-Tree-Shaking"><a href="#什麼是-Tree-Shaking" class="headerlink" title="什麼是 Tree Shaking ?"></a>什麼是 Tree Shaking ?</h3><p>其實這個技巧跟字面上的意思很像，當用力搖一棵樹時可能會把很笨重的果實給搖落，在程式面來說就是把「用不到的程式碼給搖落下來」，上面的例子講到我們可能會為了幾個特定函式而需要載入整個套件，運用 Tree Shaking 之後，可以讓打包工具在打包階段就可以分析哪些 code 或哪些 function 是用不到的，而把它們從最終的 bundle 中剔除，換句話說就是確保最後的 bundle 不會包含無用或多餘的程式碼與資源，減少 bundle size。</p>
<h3 id="如何做到-Tree-Shaking"><a href="#如何做到-Tree-Shaking" class="headerlink" title="如何做到 Tree Shaking ?"></a>如何做到 Tree Shaking ?</h3><p>要做到 Tree Shaking，首先得透過 ES6 import export 的幫忙</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Import all the array utilities!</span></span><br><span class="line"><span class="keyword">import</span> arrayUtils <span class="keyword">from</span> <span class="string">&quot;array-utils&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>假設我們要使用 array-utils 中的某幾個函式，應該避免上面的引入方式（把整個 array-utils 引入進來，再去使用特定的 property），而改為下面這種引入方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Import only some of the utilities!</span></span><br><span class="line"><span class="keyword">import</span> &#123; unique, implode, explode &#125; <span class="keyword">from</span> <span class="string">&quot;array-utils&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>不過此時如果用打包工具例如 webpack 打包的話，還是會將整個 array-utils 加進 bundle 裡，此時還得靠例如 <strong>uglifyjs-webpack-plugin</strong> 或其他的 plugin 再加上一些額外設定才能把用不到的程式從 bundle 中移除</p>
<h2 id="Preload、Prefetch-And-Others-In-Link-Tag"><a href="#Preload、Prefetch-And-Others-In-Link-Tag" class="headerlink" title="Preload、Prefetch And Others In Link Tag"></a>Preload、Prefetch And Others In Link Tag</h2><p>這邊要介紹五個特殊的 link 技巧：prefetch、preload、preconnect、dns-preconnect、prerender。讀者可能看起來一頭霧水，不過其實它們都有一個共同的目標，或者說共同的效能優化方式：</p>
<blockquote>
<h3 id="對不久的將來會用到的資源預先處理，這裡的處理有可能是載入資源，或是建立連線，因此在真的要使用到該資源時可以省去不少時間。"><a href="#對不久的將來會用到的資源預先處理，這裡的處理有可能是載入資源，或是建立連線，因此在真的要使用到該資源時可以省去不少時間。" class="headerlink" title="對不久的將來會用到的資源預先處理，這裡的處理有可能是載入資源，或是建立連線，因此在真的要使用到該資源時可以省去不少時間。"></a>對不久的將來會用到的資源預先處理，這裡的處理有可能是載入資源，或是建立連線，因此在真的要使用到該資源時可以省去不少時間。</h3></blockquote>
<h3 id="Preload-VS-Prefetch"><a href="#Preload-VS-Prefetch" class="headerlink" title="Preload VS Prefetch"></a>Preload VS Prefetch</h3><p>preload 與 prefetch 是兩個較常被搞混的技巧，兩者的作用都是在提早取得將來會用到的資源，然而兩者的差別在於：</p>
<ul>
<li>Preload：取得當前頁面的資源（例如字體 font）。</li>
<li>Prefetch：告訴瀏覽器「這些資源我待會會用到，先幫我下載吧！」不過與 preload 不同的是 prefetch 抓取的資源不限於當前頁面使用，也就是可以跨越 navigation，例如你很確定使用者會點擊下一頁，就可以使用 prefetch 預先抓取下一頁的資源。</li>
</ul>
<p>瀏覽器對於資源的載入順序是有規則的，是以檔案類型來決定下載的優先順序，以 chrome 舉例來說（不確定不同瀏覽器是否不同）：</p>
<ul>
<li>High priority : style /font / XHR (sync) </li>
<li>Medium priority : 位於可視區域的圖片 / Preload without as/ XHR (async) </li>
<li>Low priority : favicon、script async / defer / block、不在可視區域的圖片、媒體檔、SVG 等</li>
</ul>
<h3 id="Preconnect"><a href="#Preconnect" class="headerlink" title="Preconnect"></a>Preconnect</h3><p>preconnect 相當於告訴瀏覽器：「這個網頁將會在不久的將來下載某個 domain 的資源，請先幫我建立好連線。」</p>
<p>要理解 preconnect 能夠達成的事，得了解瀏覽器在實際傳輸資源前，實際上經過哪些步驟（以下內容與圖片參考<a target="_blank" rel="noopener" href="https://www.igvita.com/2015/08/17/eliminating-roundtrips-with-preconnect/">這篇文章</a>）：</p>
<ul>
<li>向 DNS 請求解析網域名</li>
<li>TCP Handshake</li>
<li>(HTTPS connection) SSL Negotiation</li>
<li>建立連線完成，等待拿到資料的第一個byte</li>
</ul>
<p>上面的四個步驟中，每一步都會需要一個 RTT (Round Trip Time) 的來回時間。所以在實際傳輸資料之前，已經花了3個 RTT 的時間。如果在網路狀況很差的狀況下，會讓獲取資源的速度大大降低。</p>
<p>利用 preconnect 提早建立好與特定 domain 之間的連線，省去了一次完整的 (DNS Lookup + TCP Handshake + SSL Negotiation) ，共三個 Round Trip Time 的時間。</p>
<h3 id="Preconnect-Use-Cases"><a href="#Preconnect-Use-Cases" class="headerlink" title="Preconnect Use Cases :"></a>Preconnect Use Cases :</h3><p>通常只會對確定短時間內就會用到的 domain 做 preconnect，因為如果 10 秒內沒有使用的話瀏覽器會自動把連線 close 掉</p>
<ul>
<li>CDN：如果網站中有很多資源要從 CDN 拿取，可以 preconnect CDN 的域名，這在不能預先知道有哪些資源要抓取的情況，是蠻適合的 use case。</li>
<li>Streaming 串流媒體 （待會看下方 lite-youtube-embed 的例子）</li>
</ul>
<h3 id="DNS-Preconnect"><a href="#DNS-Preconnect" class="headerlink" title="DNS Preconnect"></a>DNS Preconnect</h3><p>跟 preconnect 類似，差別在於只提示瀏覽器預先處理第一步 DNS lookup 而已。至於什麼時機要使用哪個方式，可以參考這篇 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/47273743/preconnect-vs-dns-prefetch-resource-hints">stackoverflow 問題</a></p>
<h3 id="Prerender"><a href="#Prerender" class="headerlink" title="Prerender"></a>Prerender</h3><p>prerender 比 prefetch 更進一步。不僅僅會下載對應的資源，還會對資源進行解析。解析過程中，如果需要其他的資源，可能會直接下載這些資源，基本上就是盡可能預先渲染下個頁面，這樣一來當用戶在從當前頁面跳轉到目標頁面時，瀏覽器可以快速的響應。適合用在用戶很高機率會轉到另一個頁面的狀況下使用</p>
<h2 id="CDN-amp-Cache"><a href="#CDN-amp-Cache" class="headerlink" title="CDN &amp; Cache"></a>CDN &amp; Cache</h2><p>CDN 的全名為：「Content Delivery Network 內容傳遞網路」。</p>
<p>要知道距離不僅僅是愛情的毒藥（誤），也是影響 response time 的重大因素。假設你身在台灣，跟一個架設在台灣的 server 取資料，花費的時間只要 500 ms，但如果去跟一個架設在美國的 server 取相同的資料，這時候的 response time 可能就增長為 3000 ms。</p>
<p>CDN 就是透過在各個地理位置建立 edge server 來避免取資源時都要跟距離遙遠的 server 溝通，造成效能的低落。當使用者對被 CDN 加速過的域名發出 request 時，CDN 會自動將 request 導到地理位置離使用者較近或是流量較不吃緊的 edge server，儘管第一次取資源時因為 CDN 還沒有快取的資料，所以仍然需要跟 original server 要資料，不過之後的 request 就可以透過地理位置離使用者較近的 CDN cache 取得，加快 client 端資源載入的速度。除了 cahce 機制以外，CDN 某方面也算是增強了服務的可用性、負載功能、安全性（降低 DDOS 對網站的影響）。</p>
<p>如果要更深入了解 CDN 或者 networking cache，推薦參考<a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10225276">這篇鐵人賽的優質文章</a>。</p>
<p>而目前最熱門的免費 CDN 服務大概就是 <strong>Cloudflare</strong> 了， 它主要提供的服務有：</p>
<ul>
<li>CDN</li>
<li>Cache</li>
<li>Load Balancing</li>
<li>代管 DNS</li>
<li>阻擋惡意流量</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://medium.com/starbugs/%E4%BB%8A%E6%99%9A-%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E-web-%E5%89%8D%E7%AB%AF%E6%95%88%E8%83%BD%E5%84%AA%E5%8C%96%E5%A4%A7%E8%A3%9C%E5%B8%96-e1a5805c1ca2">今晚，我想來點 Web 前端效能優化大補帖</a></p>

                </div>
                <footer class="kratos-entry-footer clearfix">
                    <div class="post-like-donate text-center clearfix">
                        <a class="read-more" href="/2021/05/22/%E4%BB%8A%E6%99%9A%EF%BC%8C%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E%20Web%20%E5%89%8D%E7%AB%AF%E6%95%88%E8%83%BD%E5%84%AA%E5%8C%96%E5%A4%A7%E8%A3%9C%E5%B8%96/#more" title="今晚，我想來點 Web 前端效能優化大補帖">繼續閱讀 <i class="fa fa-chevron-circle-right"></i></a>
                    </div>
                </footer>
            </div>
        </article>
    



    <div class='text-center pagination'>
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </div>



    <div class="hidden">
        <!-- 加载文章阅读对应的统计功能，评论自带的那种 -->
        
    </div>



        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
        <div class="sticky-area">
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
</aside>
            
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分類目錄</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/123/">123</a><span class="category-list-count">1</span></li></ul></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>標籤</h4>
      <div class="tag-clouds">
        <a href="/tags/Coding-Tips/" style="font-size: 0.7em;">Coding Tips</a> <a href="/tags/OOP/" style="font-size: 0.6em;">OOP</a> <a href="/tags/Operating-System/" style="font-size: 0.6em;">Operating System</a> <a href="/tags/PHP/" style="font-size: 0.6em;">PHP</a> <a href="/tags/Regex/" style="font-size: 0.7em;">Regex</a> <a href="/tags/System-Design/" style="font-size: 0.6em;">System Design</a> <a href="/tags/coding-Tips/" style="font-size: 0.6em;">coding Tips</a> <a href="/tags/front-end/" style="font-size: 0.65em;">front-end</a> <a href="/tags/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99-code/" style="font-size: 0.65em;">可不可以不要寫糙 code</a> <a href="/tags/%E5%BD%93%E7%84%B6%E6%88%91%E5%9C%A8%E6%89%AF%E6%B7%A1/" style="font-size: 0.75em;">当然我在扯淡</a> <a href="/tags/%E5%BF%85%E5%8B%9D-IT-%E5%8D%81%E5%85%AB%E6%8B%9B/" style="font-size: 0.6em;">必勝 IT 十八招</a> <a href="/tags/%E8%AC%9B%E5%BA%A7%E5%8F%83%E8%88%87%E5%BF%83%E5%BE%97/" style="font-size: 0.6em;">講座參與心得</a> <a href="/tags/%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97/" style="font-size: 0.8em;">閱讀心得</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2021/09/03/hello-world/"><i class="fa  fa-book"></i> Hello World</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E4%BB%80%E9%BA%BC%E6%98%AF%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E5%8F%8B%E5%A5%BD/"><i class="fa  fa-book"></i> 什麼是對使用者友好</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%20-%20Introducation/"><i class="fa  fa-book"></i> 作業系統 - Introducation</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%20%E7%B3%BB%E5%88%97%20%E7%AC%AC%208%20%E7%AF%87%20-%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%A8%BB%E8%A7%A3/"><i class="fa  fa-book"></i> 可不可以不要寫糙 code 系列 第 8 篇 - 不必要的註解</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/22/%E5%8F%AF%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%8D%E8%A6%81%E5%AF%AB%E7%B3%99%20code%E7%B3%BB%E5%88%97%20-%20%E5%A6%82%E4%BD%95%E5%AF%AB%E9%AB%98%E5%93%81%E8%B3%AA%20function/"><i class="fa  fa-book"></i> 可不可以不要寫糙 code系列 - 如何寫高品質 function </a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <li><a href="mailto:nagicheng@gmail.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        <li><a target="_blank" rel="nofollow" href="https://www.facebook.com/https://www.facebook.com/profile.php?id=100004983279906"><i class="fa fa-facebook-official"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://cn.linkedin.com/in/https://www.linkedin.com/in/nagikon/"><i class="fa fa-linkedin-square"></i></a></li>
                        
                        <li><a target="_blank" rel="nofollow" href="https://github.com/https://github.com/NagiKon"><i class="fa fa-github"></i></a></li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2021 Treeboのブログ 版權所有.</li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by Treebo.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>





    <script defer src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>


    <script defer src="/js/kr-dark.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>